
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Skynet Docs</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="../stylesheets/screen-949a6d2c.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print-4910022a.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all-c5541673.js"></script>
  </head>

  <body class="v4 v4_index" data-languages="[&quot;shell--curl&quot;,&quot;shell--cli&quot;,&quot;javascript--browser&quot;,&quot;javascript--node&quot;,&quot;python&quot;,&quot;go&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="../images/logo-7720f076.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell--curl">curl</a>
              <a href="#" data-language-name="shell--cli">CLI</a>
              <a href="#" data-language-name="javascript--browser">Browser JS</a>
              <a href="#" data-language-name="javascript--node">NodeJS</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="go">Go</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#languages" class="toc-h2 toc-link" data-title="Languages">Languages</a>
                  </li>
                  <li>
                    <a href="#tutorial" class="toc-h2 toc-link" data-title="Tutorial">Tutorial</a>
                  </li>
                  <li>
                    <a href="#using-the-beta" class="toc-h2 toc-link" data-title="Using the Beta">Using the Beta</a>
                  </li>
                  <li>
                    <a href="#a-note-about-language-differences" class="toc-h2 toc-link" data-title="A Note About Language Differences">A Note About Language Differences</a>
                  </li>
                  <li>
                    <a href="#using-the-shell" class="toc-h2 toc-link" data-title="Using The Shell">Using The Shell</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#getting-started" class="toc-h1 toc-link" data-title="Getting Started">Getting Started</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#making-your-first-api-call" class="toc-h2 toc-link" data-title="Making Your First API Call">Making Your First API Call</a>
                  </li>
                  <li>
                    <a href="#skynet-client" class="toc-h2 toc-link" data-title="Skynet Client">Skynet Client</a>
                  </li>
                  <li>
                    <a href="#portal-selection" class="toc-h2 toc-link" data-title="Portal Selection">Portal Selection</a>
                  </li>
                  <li>
                    <a href="#setting-additional-options" class="toc-h2 toc-link" data-title="Setting Additional Options">Setting Additional Options</a>
                  </li>
                  <li>
                    <a href="#useful-constants" class="toc-h2 toc-link" data-title="Useful Constants">Useful Constants</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#using-the-skynet-client" class="toc-h1 toc-link" data-title="Using The Skynet Client">Using The Skynet Client</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#basic-portal-selection" class="toc-h2 toc-link" data-title="Basic Portal Selection">Basic Portal Selection</a>
                  </li>
                  <li>
                    <a href="#default-portal-selection" class="toc-h2 toc-link" data-title="Default Portal Selection">Default Portal Selection</a>
                  </li>
                  <li>
                    <a href="#setting-connection-options" class="toc-h2 toc-link" data-title="Setting Connection Options">Setting Connection Options</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#uploading-to-skynet" class="toc-h1 toc-link" data-title="Uploading To Skynet">Uploading To Skynet</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#uploading-a-file" class="toc-h2 toc-link" data-title="Uploading A File">Uploading A File</a>
                  </li>
                  <li>
                    <a href="#uploading-a-directory" class="toc-h2 toc-link" data-title="Uploading A Directory">Uploading A Directory</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#downloading-from-skynet" class="toc-h1 toc-link" data-title="Downloading From Skynet">Downloading From Skynet</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#downloading-a-file" class="toc-h2 toc-link" data-title="Downloading A File">Downloading A File</a>
                  </li>
                  <li>
                    <a href="#downloading-a-file-from-an-uploaded-directory" class="toc-h2 toc-link" data-title="Downloading A File From An Uploaded Directory">Downloading A File From An Uploaded Directory</a>
                  </li>
                  <li>
                    <a href="#getting-metadata" class="toc-h2 toc-link" data-title="Getting Metadata">Getting Metadata</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#skydb" class="toc-h1 toc-link" data-title="SkyDB">SkyDB</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getting-data-from-skydb" class="toc-h2 toc-link" data-title="Getting Data From SkyDB">Getting Data From SkyDB</a>
                  </li>
                  <li>
                    <a href="#setting-data-on-skydb" class="toc-h2 toc-link" data-title="Setting Data On SkyDB">Setting Data On SkyDB</a>
                  </li>
                  <li>
                    <a href="#getting-the-entry-url" class="toc-h2 toc-link" data-title="Getting The Entry URL">Getting The Entry URL</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#registry" class="toc-h1 toc-link" data-title="Registry">Registry</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#getting-data-from-the-registry" class="toc-h2 toc-link" data-title="Getting Data From The Registry">Getting Data From The Registry</a>
                  </li>
                  <li>
                    <a href="#setting-data-on-the-registry" class="toc-h2 toc-link" data-title="Setting Data On The Registry">Setting Data On The Registry</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#mysky" class="toc-h1 toc-link" data-title="MySky">MySky</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#initializing-mysky" class="toc-h2 toc-link" data-title="Initializing MySky">Initializing MySky</a>
                  </li>
                  <li>
                    <a href="#adding-dacs" class="toc-h2 toc-link" data-title="Adding DACs">Adding DACs</a>
                  </li>
                  <li>
                    <a href="#adding-custom-permissions" class="toc-h2 toc-link" data-title="Adding Custom Permissions">Adding Custom Permissions</a>
                  </li>
                  <li>
                    <a href="#mysky-paths" class="toc-h2 toc-link" data-title="MySky Paths">MySky Paths</a>
                  </li>
                  <li>
                    <a href="#logging-in" class="toc-h2 toc-link" data-title="Logging In">Logging In</a>
                  </li>
                  <li>
                    <a href="#check-login-silent-login" class="toc-h2 toc-link" data-title="Check Login (Silent Login)">Check Login (Silent Login)</a>
                  </li>
                  <li>
                    <a href="#request-login-access-popup-login" class="toc-h2 toc-link" data-title="Request Login Access (Popup Login)">Request Login Access (Popup Login)</a>
                  </li>
                  <li>
                    <a href="#logout" class="toc-h2 toc-link" data-title="Logout">Logout</a>
                  </li>
                  <li>
                    <a href="#getting-and-setting-user-data" class="toc-h2 toc-link" data-title="Getting And Setting User Data">Getting And Setting User Data</a>
                  </li>
                  <li>
                    <a href="#getting-discoverable-json" class="toc-h2 toc-link" data-title="Getting Discoverable JSON">Getting Discoverable JSON</a>
                  </li>
                  <li>
                    <a href="#setting-discoverable-json" class="toc-h2 toc-link" data-title="Setting Discoverable JSON">Setting Discoverable JSON</a>
                  </li>
                  <li>
                    <a href="#getting-encrypted-json" class="toc-h2 toc-link" data-title="Getting Encrypted JSON">Getting Encrypted JSON</a>
                  </li>
                  <li>
                    <a href="#setting-encrypted-json" class="toc-h2 toc-link" data-title="Setting Encrypted JSON">Setting Encrypted JSON</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#crypto-utilities" class="toc-h1 toc-link" data-title="Crypto Utilities">Crypto Utilities</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#generating-key-pairs-and-seeds" class="toc-h2 toc-link" data-title="Generating Key Pairs And Seeds">Generating Key Pairs And Seeds</a>
                  </li>
                  <li>
                    <a href="#generating-key-pairs-from-seeds" class="toc-h2 toc-link" data-title="Generating Key Pairs From Seeds">Generating Key Pairs From Seeds</a>
                  </li>
                  <li>
                    <a href="#deriving-child-seeds" class="toc-h2 toc-link" data-title="Deriving Child Seeds">Deriving Child Seeds</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#handshake" class="toc-h1 toc-link" data-title="Handshake">Handshake</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#downloading-handshake-files" class="toc-h2 toc-link" data-title="Downloading Handshake Files">Downloading Handshake Files</a>
                  </li>
                  <li>
                    <a href="#resolving-handshake-domains" class="toc-h2 toc-link" data-title="Resolving Handshake Domains">Resolving Handshake Domains</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#browser-js-api" class="toc-h1 toc-link" data-title="Browser JS API">Browser JS API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#opening-a-file" class="toc-h2 toc-link" data-title="Opening A File">Opening A File</a>
                  </li>
                  <li>
                    <a href="#loading-a-file-39-s-contents" class="toc-h2 toc-link" data-title="Loading A File's Contents">Loading A File's Contents</a>
                  </li>
                  <li>
                    <a href="#getting-the-download-url" class="toc-h2 toc-link" data-title="Getting The Download URL">Getting The Download URL</a>
                  </li>
                  <li>
                    <a href="#getting-a-handshake-url" class="toc-h2 toc-link" data-title="Getting A Handshake URL">Getting A Handshake URL</a>
                  </li>
                  <li>
                    <a href="#getting-a-handshake-resolver-url" class="toc-h2 toc-link" data-title="Getting A Handshake Resolver URL">Getting A Handshake Resolver URL</a>
                  </li>
                  <li>
                    <a href="#parsing-skylinks" class="toc-h2 toc-link" data-title="Parsing Skylinks">Parsing Skylinks</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-authentication" class="toc-h1 toc-link" data-title="API Authentication">API Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#skynet-portal-authentication" class="toc-h2 toc-link" data-title="Skynet Portal Authentication">Skynet Portal Authentication</a>
                  </li>
                  <li>
                    <a href="#local-node-authentication" class="toc-h2 toc-link" data-title="Local Node Authentication">Local Node Authentication</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#updating-from-v3" class="toc-h1 toc-link" data-title="Updating From v3">Updating From v3</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#upgrading" class="toc-h2 toc-link" data-title="Upgrading">Upgrading</a>
                  </li>
                  <li>
                    <a href="#installing-a-dac" class="toc-h2 toc-link" data-title="Installing a DAC">Installing a DAC</a>
                  </li>
                  <li>
                    <a href="#breaking-changes" class="toc-h2 toc-link" data-title="Breaking Changes">Breaking Changes</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li>Version: v4</li>
            <li><a href='v4'>Permalink to this version</a></li>
            <li><a href='v3'>Previous version</a></li>
            <li>---</li>
            <li><a href='https://siasky.net/'>Check out Skynet!</a></li>
            <li><a href='https://github.com/SkynetLabs/skynet-docs'>Contribute to the docs</a></li>
            <li>---</li>
            <li><a href='https://github.com/slatedocs/slate'>Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p><strong>Latest version:</strong> <a href='v4'>v4</a> (<a href="v4#updating-from-v3">Update Guide</a>)</p>

<p>Welcome to the Skynet SDK API reference docs!</p>

<p>To <strong>learn more about Skynet</strong>, see the <a href="https://support.skynetlabs.net/">Skynet support docs</a>.</p>

<p>For <strong>developer guides</strong>, see the <a href="https://docs.skynetlabs.com/">Skynet developer docs</a>.</p>
<h2 id='languages'>Languages</h2>
<aside class="warning">
As of April 2022 the non-JS SDKs are still under heavy construction. Use the JS
libraries for the best experience.
</aside>

<p>We have SDK support for several languages:</p>

<ul>
<li>Shell (using curl). See the <a href="#using-the-shell">Using The Shell</a> section.</li>
<li><a href="https://github.com/SkynetLabs/skynet-js">Browser JS</a> <strong>(most up-to-date)</strong></li>
<li><a href="https://github.com/SkynetLabs/nodejs-skynet">NodeJS</a> (missing SkyDB and MySky but mostly featureful)</li>
<li><a href="https://github.com/SkynetLabs/python-skynet">Python</a> (basic functionality only)</li>
<li><a href="https://github.com/SkynetLabs/go-skynet">Go</a> (basic functionality only)</li>
<li><a href="https://github.com/SkynetLabs/skynet-cli">Skynet CLI</a> (written in Go, basic functionality only).</li>
</ul>

<p>Full documentation for the Skynet HTTP API can be found in the <a href="https://sia.tech/docs/#skynet">Sia API
Documentation</a>.</p>

<aside class="success">
You can view code examples in the dark area to the right. Switch to the
programming language of your choice by clicking the tabs in the top right.
</aside>
<h2 id='tutorial'>Tutorial</h2>
<p>We have a detailed tutorial for <a href="https://blog.sia.tech/creating-your-first-web-app-on-skynet-ec6f4fff405f">Creating Your First Webapp On
Skynet</a>
on our tech blog. Check it out if you are just starting out!</p>

<p>See also our <a href="https://docs.skynetlabs.net/">developer docs</a> for more guides.</p>
<h2 id='using-the-beta'>Using the Beta</h2>
<p>We are releasing new features and fixes first on the <code>beta</code> stream. The latest
beta version can be installed with <code>npm install skynet-js@beta</code>.</p>
<h2 id='a-note-about-language-differences'>A Note About Language Differences</h2>
<p>Though we tried to keep the SDKs as similar to each other as possible in usage,
differences between the languages -- the idiosyncracies and best practices of
each -- resulted in differences between the SDKs. We&#39;ve noted them where
necessary throughout the documentation.</p>
<h3 id='function-parameters'>Function Parameters</h3>
<p>In most of the SDKs the additional options may be left out of the function
calls, in which case the default options are used. In <b>Go</b> the options must
always be passed in, as the language does not support optional function
parameters.</p>
<h3 id='case'>Case</h3>
<p>Note that the casing of functions and their parameters differs between the
languages:</p>

<table><thead>
<tr>
<th>Language</th>
<th>Case</th>
</tr>
</thead><tbody>
<tr>
<td>Javascript</td>
<td><a href="https://en.wikipedia.org/wiki/Camel_case"><code>camelCase</code></a></td>
</tr>
<tr>
<td>Python</td>
<td><a href="https://en.wikipedia.org/wiki/Snake_case"><code>snake_case</code></a></td>
</tr>
<tr>
<td>Go</td>
<td><a href="https://en.wikipedia.org/wiki/PascalCase"><code>PascalCase</code></a></td>
</tr>
</tbody></table>

<p>For consistency throughout this document, functions and their parameters are
documented using <code>camelCase</code>.</p>
<h3 id='standard-responses'>Standard Responses</h3>
<p>Functions will respond with the desired content on success and with errors or
exceptions on failure. The error messages may contain HTTP status codes (see
<a href="https://sia.tech/docs/#standard-responses">the Sia Docs</a>).</p>

<p>Functions will fail differently in each SDK depending on the language:</p>

<table><thead>
<tr>
<th>Language</th>
<th>Failure Mode</th>
</tr>
</thead><tbody>
<tr>
<td>Javascript</td>
<td>Exceptions are raised and must be caught with a <code>try-catch</code> block.</td>
</tr>
<tr>
<td>Python</td>
<td>Same as above.</td>
</tr>
<tr>
<td>Go</td>
<td>Errors are returned and must be checked for explicitly.</td>
</tr>
</tbody></table>
<h2 id='using-the-shell'>Using The Shell</h2><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="k">function </span>skynet<span class="o">()</span> <span class="o">{</span>
  curl <span class="nt">-X</span> POST <span class="s2">"https://siasky.net/skynet/skyfile"</span> <span class="nt">-F</span> <span class="s2">"file=@</span><span class="nv">$1</span><span class="s2">"</span> <span class="se">\</span>
    | jq <span class="s2">".skylink"</span> | xargs <span class="nt">-I</span> _ <span class="nb">echo</span> <span class="s2">"https://siasky.net/_"</span>
<span class="o">}</span>
</code></pre></div>
<p>Our shell examples present only simple curl calls. You may find it helpful to
write wrappers around these in Bash, or the shell language of your choice, to
make them more reusable. To the right we have provided a simple example which
uses <a href="https://stedolan.github.io/jq/"><code>jq</code></a>.</p>
<h1 id='getting-started'>Getting Started</h1><h2 id='making-your-first-api-call'>Making Your First API Call</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s2">"https://siasky.net/skynet/skyfile/&lt;siapath&gt;"</span> <span class="nt">-F</span> <span class="s1">'file=@image.jpg'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet upload <span class="s2">"./image.jpg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="c1">// Assume we have a file from an input form.</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">uploadExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, skylink: </span><span class="p">${</span><span class="nx">skylink</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">./image.jpg</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, skylink: </span><span class="p">${</span><span class="nx">skylink</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">()</span>

<span class="n">skylink</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">upload_file</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Upload successful, skylink: "</span> <span class="o">+</span> <span class="n">skylink</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">skylink</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">UploadFile</span><span class="p">(</span><span class="s">"./image.jpg"</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultUploadOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to upload: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Upload successful, skylink: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>The SDKs are set up to be as simple as possible. Despite the many options for
configuration, most users will be able to get started with a single API call. In
the example on the right, we upload the file <code>image.jpg</code> to the default Skynet
portal (which in Browser JS is the portal running the code and in other SDKs is
<code>https://siasky.net</code>).</p>

<p><strong>Note:</strong> If you are testing or running a Browser JS app locally, you will
either have to run a Skynet portal locally or initialize the Skynet Client to
connect to an existing portal such as <code>https://siasky.net</code>. See <a href="#portal-selection">Portal
Selection</a> below.</p>
<h2 id='skynet-client'>Skynet Client</h2>
<p>The above examples also demonstrate the use of the Skynet client. This client is
required to make any API calls. It sets the portal that will be used for all
requests. It can also be initialized with custom connection options that will
be applied in all calls, unless calling an API method with the same options,
which then take precedent and override what was set in client initialization.</p>

<p>Please see <a href="#using-the-skynet-client">Using The Skynet Client</a> for more information.</p>
<h2 id='portal-selection'>Portal Selection</h2>
<p>In order to use a specific portal, you will need to use it as the first argument
in client creation. Please see <a href="#basic-portal-selection">Basic Portal Selection</a>
for more information.</p>
<h2 id='setting-additional-options'>Setting Additional Options</h2>
<p>Each SDK function also accepts additional options. These vary depending on the
endpoint and are documented alongside each function.</p>

<aside class="warning">
The SDKs are actively being worked on, and so far not every additional option
has been implemented in every SDK.
</aside>

<aside class="notice">
The additional options object is optional in most SDKs but mandatory in Go. See
<a href="#function-parameters">Function Parameters</a>.
</aside>
<h3 id='common-options'>Common Options</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Set a custom user agent.</span>
<span class="kd">const</span> <span class="nx">customUserAgent</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Sia-Agent</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Set an upload progress tracker.</span>
<span class="kd">const</span> <span class="nx">onUploadProgress</span> <span class="o">=</span> <span class="p">(</span><span class="nx">progress</span><span class="p">,</span> <span class="p">{</span> <span class="nx">loaded</span><span class="p">,</span> <span class="nx">total</span> <span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="s2">`Progress </span><span class="p">${</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">progress</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)}</span><span class="s2">%`</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Initialize the client.</span>
<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://siasky.net</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="nx">customUserAgent</span><span class="p">,</span> <span class="nx">onUploadProgress</span> <span class="p">});</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">uploadExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Every function accepts the following common options:</p>

<table><thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>APIKey</code></td>
<td>The API password used for <a href="#api-authentication">authentication</a>.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>customUserAgent</code></td>
<td>Allows changing the User Agent, as some portals may reject user agents that are not <code>Sia-Agent</code> for security reasons.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>onUploadProgress</code></td>
<td>Optional callback to track upload progress.</td>
<td>undefined</td>
</tr>
</tbody></table>
<h2 id='useful-constants'>Useful Constants</h2>
<p>Here are some constants exported by the SDKs which may be of use in applications.</p>

<table><thead>
<tr>
<th>Constant</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>defaultSkynetPortalUrl</code></td>
<td>The default Skynet portal to use, if one is not provided.</td>
<td><code>&quot;https://siasky.net&quot;</code></td>
</tr>
<tr>
<td><code>uriSkynetPrefix</code></td>
<td>The Skynet URI prefix.</td>
<td><code>&quot;sia://&quot;</code> (<em>Browser JS</em>: <code>&quot;sia:&quot;</code>)</td>
</tr>
</tbody></table>
<h1 id='using-the-skynet-client'>Using The Skynet Client</h1>
<p>The Skynet Client is required to make any API calls. It sets the portal that
will be used for all requests. It can also be initialized with custom connection
options that will be applied in all calls, unless calling an API method with the
same options (which then take precedent and override what was set in client
initialization).</p>
<h2 id='basic-portal-selection'>Basic Portal Selection</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Or SkynetClient() without arguments to use the default portal.</span>
<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://some-other-portal.xyz</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="c1">// Or SkynetClient() without arguments to use the default portal.</span>
<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">(</span><span class="dl">"</span><span class="s2">https://some-other-portal.xyz</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="c1"># Or SkynetClient() without arguments to use the default portal.
</span><span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">(</span><span class="s">"https://some-other-portal.xyz"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">NewCustom</span><span class="p">(</span><span class="s">"https://some-other-portal.xyz"</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">Options</span><span class="p">{})</span>
</code></pre></div>
<p>To make any API calls you will need to first create a new client with the
desired portal. The client can be initialized without arguments to let the
client choose it for you (see below) or the portal can be specified. See the
code example on the right.</p>
<h2 id='default-portal-selection'>Default Portal Selection</h2>
<p>The default portal used is <code>https://siasky.net</code> for all SDKs <em>except Browser
JS</em>, which tries to use the portal which is running the sky app. The default
portal is accessible through the exported function, <code>defaultPortalUrl</code>, and no
configuration is required to use it. Having a reasonable choice already selected
keeps friction for new developers low.</p>

<p>In the future the default selection will be smarter and there will be more
options for default portal selection, such as configuration files. Please see
<a href="https://github.com/SkynetLabs/skynet-docs/issues/5">this issue</a>.</p>
<h2 id='setting-connection-options'>Setting Connection Options</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">(</span><span class="dl">""</span><span class="p">,</span> <span class="p">{</span> <span class="na">APIKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foobar</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">(</span><span class="dl">""</span><span class="p">,</span> <span class="p">{</span> <span class="na">APIKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foobar</span><span class="dl">"</span> <span class="p">});</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="c1"># Or SkynetClient() without arguments to use the default portal.
</span><span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="p">{</span><span class="s">"api_key"</span><span class="p">:</span> <span class="s">"foobar"</span><span class="p">})</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">NewCustom</span><span class="p">(</span><span class="s">""</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">Options</span><span class="p">{</span><span class="n">APIKey</span><span class="o">:</span> <span class="s">"foobar"</span><span class="p">})</span>
</code></pre></div>
<p>Apart from setting a persistent portal, client initialization also allows you to
choose persistent connection settings. These will be applied on every subsequent
API call using the client, unless the setting is overridden in a particular
call.</p>

<p>Please see <a href="#setting-additional-options">Setting Additional Options</a>.</p>

<aside class="notice">
To set custom connection options while using the default portal, set the portal
value to <code>""</code>.
</aside>
<h1 id='uploading-to-skynet'>Uploading To Skynet</h1><h2 id='uploading-a-file'>Uploading A File</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s2">"https://siasky.net/skynet/skyfile/&lt;siapath&gt;"</span> <span class="nt">-F</span> <span class="s1">'file=@image.jpg'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet upload <span class="s2">"./image.jpg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="c1">// NOTE: This example is different from the other SDKs because we cannot just</span>
<span class="c1">// take a path to a local file.</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">uploadExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">./image.jpg</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, skylink: </span><span class="p">${</span><span class="nx">skylink</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">()</span>

<span class="n">skylink</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">upload_file</span><span class="p">(</span><span class="s">"image.jpg"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Upload successful, skylink: "</span> <span class="o">+</span> <span class="n">skylink</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">skylink</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">UploadFile</span><span class="p">(</span><span class="s">"./image.jpg"</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultUploadOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to upload: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Upload successful, skylink: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Uploading a file to Skynet can be done through a Skynet portal or your
local <code>siad</code> instance.</p>

<aside class="notice">
If a file is uploaded through a portal, the portal owner is paying to host that
file, and it will remain on the network for as long as that file contract is
valid.
</aside>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td>The local path where the file to upload may be found.</td>
</tr>
</tbody></table>

<p><em>Browser JS:</em></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>file</code></td>
<td>The <code>File</code> object returned from an input form.</td>
</tr>
</tbody></table>
<h3 id='additional-options'>Additional Options</h3>
<p>Note that you can set <a href="#common-options">common options</a> for individual method calls as well, including <code>onUploadProgress</code>.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>portalFileFieldName</code></td>
<td>The field name for files on the portal. Usually should not need to be changed.</td>
<td><code>&quot;file&quot;</code></td>
</tr>
<tr>
<td><code>portalDirectoryFileFieldName</code></td>
<td>The field name for directories on the portal. Usually should not need to be changed.</td>
<td><code>&quot;files[]&quot;</code></td>
</tr>
<tr>
<td><code>customFilename</code></td>
<td>Custom filename. This is the filename that will be returned when downloading the file in a browser.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>customDirname</code></td>
<td>Custom dirname. If this is empty, the base name of the directory being uploaded will be used by default.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>timeout_seconds</code></td>
<td>The timeout in seconds.</td>
<td><code>&quot;&quot;</code></td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span>
  <span class="s2">"skylink"</span>: <span class="s2">"CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>,
  <span class="s2">"merkleroot"</span>: <span class="s2">"QAf9Q7dBSbMarLvyeE6HTQmwhr7RX9VMrP9xIMzpU3I"</span>,
  <span class="s2">"bitfield"</span>: 2048
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>Successfully uploaded file! Skylink: sia://CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="dl">"</span><span class="s2">sia:CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg</span><span class="dl">"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="dl">"</span><span class="s2">sia://CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg</span><span class="dl">"</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"sia://CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="s">"sia://CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>This is the skylink that can be used when downloading to retrieve the file that has been uploaded. It is a 46-character base64 encoded string that consists of the merkle root, offset, fetch size, and Skylink version which can be used to access the content.</td>
</tr>
<tr>
<td><code>merkleroot</code></td>
<td>This is the hash that is encoded into the skylink.</td>
</tr>
<tr>
<td><code>bitfield</code></td>
<td>This is the bitfield that gets encoded into the skylink. The bitfield contains a version, an offset and a length in a heavily compressed and optimized format.</td>
</tr>
</tbody></table>

<aside class="warning">
Note that the SDKs only return the skylink since this is what you want most of the time. We are still working on ways to access more information from the result without complicating the main use case.
</aside>
<h2 id='uploading-a-directory'>Uploading A Directory</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s2">"https://siasky.net/skynet/&lt;siapath&gt;?filename=images"</span> <span class="nt">-F</span> <span class="s1">'files[]=@./images/image1.png'</span> <span class="nt">-F</span> <span class="s1">'files[]=@./images/image2.png'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet upload <span class="s2">"./images"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">getRelativeFilePath</span><span class="p">,</span> <span class="nx">getRootDirectory</span><span class="p">,</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="c1">// Assume we have a list of files from an input form.</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">uploadDirectoryExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Get the directory name from the list of files.</span>
    <span class="c1">// Can also be named manually, i.e. if you build the files yourself</span>
    <span class="c1">// instead of getting them from an input form.</span>
    <span class="kd">const</span> <span class="nx">filename</span> <span class="o">=</span> <span class="nx">getRootDirectory</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="c1">// Use reduce to build the map of files indexed by filepaths</span>
    <span class="c1">// (relative from the directory).</span>
    <span class="kd">const</span> <span class="nx">directory</span> <span class="o">=</span> <span class="nx">files</span><span class="p">.</span><span class="nx">reduce</span><span class="p">((</span><span class="nx">accumulator</span><span class="p">,</span> <span class="nx">file</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">getRelativeFilePath</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>

      <span class="k">return</span> <span class="p">{</span> <span class="p">...</span><span class="nx">accumulator</span><span class="p">,</span> <span class="p">[</span><span class="nx">path</span><span class="p">]:</span> <span class="nx">file</span> <span class="p">};</span>
    <span class="p">},</span> <span class="p">{});</span>

    <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadDirectory</span><span class="p">(</span><span class="nx">directory</span><span class="p">,</span> <span class="nx">filename</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadDirectory</span><span class="p">(</span><span class="dl">"</span><span class="s2">./images</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, url: </span><span class="p">${</span><span class="nx">url</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">()</span>

<span class="n">url</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">upload_directory</span><span class="p">(</span><span class="s">"./images"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Upload successful, url: "</span> <span class="o">+</span> <span class="n">url</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">url</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">UploadDirectory</span><span class="p">(</span><span class="s">"./images"</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultUploadOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to upload: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Upload successful, url: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>It is possible to upload a directory as a single piece of content. Doing this
will allow you to address your content under one skylink, and access the files
by their path. This is especially useful for webapps.</p>

<p>For example, let&#39;s say you upload a web app with the following simple structure:</p>

<pre class="not_example">
src
|-- favicon.ico
|-- index.html
|-- css
    |-- main.css
|-- js
    |-- app.js
</pre>

<p>The four files can be accessed as follows:</p>

<pre class="not_example">
[portal url]/[skylink]/favicon.ico
[portal url]/[skylink]/index.html
[portal url]/[skylink]/css/main.css
[portal url]/[skylink]/js/app.js
</pre>

<aside class="success">
You can use relative links to refer to different files within a web app. For
example, to link to the <code>main.css</code> resource from <code>index.html</code> you would do
<code>src="css/app.css</code>.
</aside>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td>The local path where the directory to upload may be found.</td>
</tr>
</tbody></table>

<p><em>Browser JS:</em></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>directory</code></td>
<td>Object containing <code>File</code>s from an input form to upload, indexed by their path strings.</td>
</tr>
<tr>
<td><code>filename</code></td>
<td>The name of the directory.</td>
</tr>
</tbody></table>
<h3 id='additional-options-2'>Additional Options</h3>
<p>See <a href="#uploading-a-file">Uploading A File</a>.</p>
<h3 id='response-2'>Response</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span>
  <span class="s2">"skylink"</span>: <span class="s2">"EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg"</span>,
  <span class="s2">"merkleroot"</span>: <span class="s2">"QAf9Q7dBSbMarLvyeE6HTQmwhr7RX9VMrP9xIMzpU3I"</span>,
  <span class="s2">"bitfield"</span>: 2048
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>Successfully uploaded directory! Skylink: sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="dl">"</span><span class="s2">sia:EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg</span><span class="dl">"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="dl">"</span><span class="s2">sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg</span><span class="dl">"</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="s">"sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg"</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="s">"sia://EAAV-eT8wBIF1EPgT6WQkWWsb3mYyEO1xz9iFueK5zCtqg"</span>
</code></pre></div>
<p>See <a href="#uploading-a-file">Uploading A File</a>.</p>
<h1 id='downloading-from-skynet'>Downloading From Skynet</h1><h2 id='downloading-a-file'>Downloading A File</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"https://siasky.net/CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span> <span class="nt">-o</span> dst.jpg
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet download <span class="s2">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg"</span> <span class="s2">"./dst.jpg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">downloadFile</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
    <span class="c1">// Or client.openFile(skylink) to open it in a new browser tab.</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}();</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">downloadFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">./dst.jpg</span><span class="dl">"</span><span class="p">,</span> <span class="nx">skylink</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Download successful</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">()</span>
<span class="n">skylink</span> <span class="o">=</span> <span class="s">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg"</span>

<span class="n">client</span><span class="p">.</span><span class="n">download_file</span><span class="p">(</span><span class="s">"./dst.jpg"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">const</span> <span class="n">skylink</span> <span class="o">=</span> <span class="s">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg"</span>
<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">DownloadFile</span><span class="p">(</span><span class="s">"./dst.go"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultDownloadOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Something went wrong, please try again.</span><span class="se">\n</span><span class="s">Error: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>This function downloads a skylink using HTTP streaming. The call blocks until
the data is received. There is a 30s default timeout applied to downloading a
skylink. If the data can not be found within this 30s time constraint, a <code>404</code>
error will be returned. This timeout is configurable.</p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td>The local path where the file should be downloaded to.</td>
</tr>
<tr>
<td><code>skylink</code></td>
<td>The skylink that should be downloaded. The skylink can contain an optional path.</td>
</tr>
</tbody></table>

<p><em>Browser JS:</em></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>The skylink that should be downloaded. The skylink can contain an optional path.</td>
</tr>
</tbody></table>
<h3 id='additional-options'>Additional Options</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td>The path to use after the skylink. See the next section.</td>
<td><code>&quot;&quot;</code></td>
</tr>
<tr>
<td><code>timeout_seconds</code></td>
<td>The timeout in seconds.</td>
<td><code>&quot;&quot;</code></td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<p>Empty on success.</p>
<h2 id='downloading-a-file-from-an-uploaded-directory'>Downloading A File From An Uploaded Directory</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"https://siasky.net/XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg/dir2/file3"</span> <span class="nt">-o</span> dst.jpg
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet download <span class="s2">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg/dir2/file3"</span> <span class="s2">"./dst.jpg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="c1">// Using the skylink.</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg/dir2/file3</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">downloadFile</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span>

<span class="c1">// Using the path option.</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">downloadFile</span><span class="p">(</span><span class="nx">skylink</span><span class="p">,</span> <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dir2/file3</span><span class="dl">"</span> <span class="p">});</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="c1">// Using the skylink.</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg/dir2/file3</span><span class="dl">"</span><span class="p">;</span>
  <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">downloadFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">./dst.jpg</span><span class="dl">"</span><span class="p">,</span> <span class="nx">skylink</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Download successful</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>

<span class="c1">// Using the path option.</span>
<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">downloadFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">./dst.jpg</span><span class="dl">"</span><span class="p">,</span> <span class="nx">skylink</span><span class="p">,</span> <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dir2/file3</span><span class="dl">"</span> <span class="p">});</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Download successful</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})()</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">()</span>

<span class="c1"># Using the skylink.
</span><span class="n">skylink</span> <span class="o">=</span> <span class="s">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg/dir2/file3"</span>
<span class="n">client</span><span class="p">.</span><span class="n">download_file</span><span class="p">(</span><span class="s">"./dst.jpg"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>

<span class="c1"># Using the path option.
</span><span class="n">skylink</span> <span class="o">=</span> <span class="s">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg"</span>
<span class="n">client</span><span class="p">.</span><span class="n">download_file</span><span class="p">(</span><span class="s">"./dst.jpg"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">,</span> <span class="p">{</span> <span class="s">"path"</span><span class="p">:</span> <span class="s">"dir2/file3"</span> <span class="p">})</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="c">// Using the skylink.</span>
    <span class="n">skylink</span> <span class="o">:=</span> <span class="s">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg/dir2/file3"</span>
    <span class="n">opts</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultDownloadOptions</span>
    <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">DownloadFile</span><span class="p">(</span><span class="s">"./dst.go"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Something went wrong, please try again.</span><span class="se">\n</span><span class="s">Error: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>

    <span class="c">// Using the path option.</span>
    <span class="n">skylink</span> <span class="o">=</span> <span class="s">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg"</span>
    <span class="n">opts</span><span class="o">.</span><span class="n">Path</span> <span class="o">=</span> <span class="s">"dir2/file3"</span><span class="p">;</span>
    <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">DownloadFile</span><span class="p">(</span><span class="s">"./dst.go"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Something went wrong, please try again.</span><span class="se">\n</span><span class="s">Error: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Download successful"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>It is possible to download files from uploaded directories if their paths
relative to the uploaded directory are known. There are two ways to do this.</p>
<h3 id='including-the-path-in-the-skylink'>Including The Path In The Skylink</h3>
<p>The skylink being passed in can contain an optional path. This path can specify
a directory or a particular file. If specified, only that file or directory will
be returned. The examples here use the directory structure from <a href="#uploading-a-directory">Uploading A
Directory</a> to illustrate this.</p>
<h3 id='the-path-additional-parameter'>The Path Additional Parameter</h3>
<p>There is a caveat to the above approach: the skylink is used as-is and any
special characters in the appended path are not encoded. We recommend using the
additional option <code>path</code> to let the SDK properly encode it for you.</p>

<p>The <code>path</code> option also is easier to use if you would otherwise have to manually
append the path to the skylink.</p>
<h2 id='getting-metadata'>Getting Metadata</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-I</span> <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"https://siasky.net/CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># NOTE: this function has not yet been implemented for this SDK.</span>

skynet metadata <span class="s2">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>

<span class="k">async</span> <span class="nx">metadataExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">metadata</span><span class="p">,</span> <span class="nx">contentType</span><span class="p">,</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getMetadata</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="c1">// NOTE: this function has not yet been implemented for this SDK.</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">md</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getMetadata</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Get metadata successful: </span><span class="p">${</span><span class="nx">md</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">()</span>
<span class="n">skylink</span> <span class="o">=</span> <span class="s">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg"</span>

<span class="n">md</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">get_metadata</span><span class="p">(</span><span class="n">skylink</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="c">// NOTE: this function has not yet been implemented for this SDK.</span>

<span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">const</span> <span class="n">skylink</span> <span class="o">=</span> <span class="s">"XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg"</span>
<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">md</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">Metadata</span><span class="p">(</span><span class="n">skylink</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultMetadataOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Something went wrong, please try again.</span><span class="se">\n</span><span class="s">Error: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Get metadata successful, metadata: %+v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">md</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>It is possible to get metadata about a file or directory without fetching
the entire content. These API calls will perform a HEAD request that fetches the
headers for the given skylink. These headers are identical to the ones that
would be returned if the request had been a GET request.</p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>The skylink that should be downloaded. The skylink can contain an optional path. This path can specify a directory or a particular file. If specified, only that file or directory will be returned.</td>
</tr>
</tbody></table>
<h3 id='additional-options-2'>Additional Options</h3>
<p>See <a href="#downloading-a-file">Downloading A File</a>.</p>
<h3 id='response-2'>Response</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span>
  <span class="s2">"mode"</span>:     640,
  <span class="s2">"filename"</span>: <span class="s2">"folder"</span>,
  <span class="s2">"subfiles"</span>: <span class="o">{</span>
    <span class="s2">"folder/file1.txt"</span>: <span class="o">{</span>
      <span class="s2">"mode"</span>:         640,
      <span class="s2">"filename"</span>:     <span class="s2">"folder/file1.txt"</span>,
      <span class="s2">"contenttype"</span>:  <span class="s2">"text/plain"</span>,
      <span class="s2">"offset"</span>:       0,
      <span class="s2">"len"</span>:          6
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="o">{</span>
  <span class="s2">"mode"</span>:     640,
  <span class="s2">"filename"</span>: <span class="s2">"folder"</span>,
  <span class="s2">"subfiles"</span>: <span class="o">{</span>
    <span class="s2">"folder/file1.txt"</span>: <span class="o">{</span>
      <span class="s2">"mode"</span>:         640,
      <span class="s2">"filename"</span>:     <span class="s2">"folder/file1.txt"</span>,
      <span class="s2">"contenttype"</span>:  <span class="s2">"text/plain"</span>,
      <span class="s2">"offset"</span>:       0,
      <span class="s2">"len"</span>:          6
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span>     <span class="mi">640</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">filename</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">folder</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">subfiles</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">folder/file1.txt</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span>         <span class="mi">640</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">filename</span><span class="dl">"</span><span class="p">:</span>     <span class="dl">"</span><span class="s2">folder/file1.txt</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">contenttype</span><span class="dl">"</span><span class="p">:</span>  <span class="dl">"</span><span class="s2">text/plain</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">offset</span><span class="dl">"</span><span class="p">:</span>       <span class="mi">0</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">len</span><span class="dl">"</span><span class="p">:</span>          <span class="mi">6</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span>
  <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span>     <span class="mi">640</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">filename</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">folder</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">subfiles</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">folder/file1.txt</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span><span class="p">:</span>         <span class="mi">640</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">filename</span><span class="dl">"</span><span class="p">:</span>     <span class="dl">"</span><span class="s2">folder/file1.txt</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">contenttype</span><span class="dl">"</span><span class="p">:</span>  <span class="dl">"</span><span class="s2">text/plain</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">offset</span><span class="dl">"</span><span class="p">:</span>       <span class="mi">0</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">len</span><span class="dl">"</span><span class="p">:</span>          <span class="mi">6</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="p">{</span>
  <span class="s">"mode"</span><span class="p">:</span>     <span class="mi">640</span><span class="p">,</span>
  <span class="s">"filename"</span><span class="p">:</span> <span class="s">"folder"</span><span class="p">,</span>
  <span class="s">"subfiles"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">"folder/file1.txt"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">"mode"</span><span class="p">:</span>         <span class="mi">640</span><span class="p">,</span>
      <span class="s">"filename"</span><span class="p">:</span>     <span class="s">"folder/file1.txt"</span><span class="p">,</span>
      <span class="s">"contenttype"</span><span class="p">:</span>  <span class="s">"text/plain"</span><span class="p">,</span>
      <span class="s">"offset"</span><span class="p">:</span>       <span class="mi">0</span><span class="p">,</span>
      <span class="s">"len"</span><span class="p">:</span>          <span class="mi">6</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="p">{</span>
  <span class="s">"mode"</span><span class="o">:</span>     <span class="m">640</span><span class="p">,</span>
  <span class="s">"filename"</span><span class="o">:</span> <span class="s">"folder"</span><span class="p">,</span>
  <span class="s">"subfiles"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s">"folder/file1.txt"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s">"mode"</span><span class="o">:</span>         <span class="m">640</span><span class="p">,</span>
      <span class="s">"filename"</span><span class="o">:</span>     <span class="s">"folder/file1.txt"</span><span class="p">,</span>
      <span class="s">"contenttype"</span><span class="o">:</span>  <span class="s">"text/plain"</span><span class="p">,</span>
      <span class="s">"offset"</span><span class="o">:</span>       <span class="m">0</span><span class="p">,</span>
      <span class="s">"len"</span><span class="o">:</span>          <span class="m">6</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>The skylink that should be downloaded. The skylink can contain an optional path. This path can specify a directory or a particular file. If specified, only that file or directory will be returned.</td>
</tr>
<tr>
<td><code>contentType</code></td>
<td>String representing the file&#39;s content type.</td>
</tr>
<tr>
<td><code>metadata</code></td>
<td>Object returned in the <code>skynet-metadata</code> header when accessing the file.</td>
</tr>
</tbody></table>
<h1 id='skydb'>SkyDB</h1>
<p>SkyDB is a framework that allows Skynet users to create decentralized accounts
and store mutable files in those accounts. It is built on top of the
<a href="#registry">Registry</a>, where every SkyDB entry in the Registry is a skylink that
contains the full data.</p>

<aside class="warning">
These functions have only been implemented for Browser JS at the moment.
</aside>
<h2 id='getting-data-from-skydb'>Getting Data From SkyDB</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="c"># There are no API endpoints for SkyDB -- you must use the registry directly.</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span><span class="p">,</span> <span class="nx">genKeyPairFromSeed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">publicKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">genKeyPairFromSeed</span><span class="p">(</span><span class="dl">"</span><span class="s2">this seed should be fairly long for security</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">dataKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">myApp</span><span class="dl">"</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">getJSONExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">dataLink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id='method'>Method</h3>
<p><code>getJSON</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>publicKey</code></td>
<td><code>string</code></td>
<td>User&#39;s public key as a hex-encoded string. Can be generated with the <code>genKeyPairFromSeed</code> function.</td>
</tr>
<tr>
<td><code>dataKey</code></td>
<td><code>string</code></td>
<td>The key of the data to fetch for the given user.</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3><div class="highlight"><pre class="highlight plaintext"><code>{
  data: {
    example: "This is some example JSON data."
  },
  dataLink: "sia://CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg"
}
</code></pre></div><h2 id='setting-data-on-skydb'>Setting Data On SkyDB</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="c"># There are no API endpoints for SkyDB -- you must use the registry directly.</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span><span class="p">,</span> <span class="nx">genKeyPairFromSeed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">privateKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">genKeyPairFromSeed</span><span class="p">(</span><span class="dl">"</span><span class="s2">this seed should be fairly long for security</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">dataKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">myApp</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">json</span> <span class="o">=</span> <span class="p">{</span> <span class="na">example</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This is some example JSON data.</span><span class="dl">"</span> <span class="p">};</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">setJSONExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">setJSON</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="nx">json</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id='method-2'>Method</h3>
<p><code>setJSON</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>privateKey</code></td>
<td><code>string</code></td>
<td>User&#39;s private key as a hex-encoded string. Can be generated with the <code>genKeyPairFromSeed</code> function.</td>
</tr>
<tr>
<td><code>dataKey</code></td>
<td><code>string</code></td>
<td>The key of the data to fetch for the given user.</td>
</tr>
<tr>
<td><code>json</code></td>
<td><code>object</code></td>
<td>The JSON object to set for the given private key and data key.</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<p>Empty on success.</p>
<h2 id='getting-the-entry-url'>Getting The Entry URL</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span><span class="p">,</span> <span class="nx">genKeyPairFromSeed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">publicKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">genKeyPairFromSeed</span><span class="p">(</span><span class="dl">"</span><span class="s2">this seed should be fairly long for security</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">dataKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">getEntryExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">getEntryUrl</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id='method-3'>Method</h3>
<p><code>getEntryUrl</code></p>
<h3 id='parameters-3'>Parameters</h3>
<p>See <a href="#getting-data-from-the-registry">Getting Data From The Registry</a>.</p>
<h3 id='response-3'>Response</h3><div class="highlight"><pre class="highlight plaintext"><code>"https://siasky.net/skynet/registry?publickey=ed25519%3Ac1197e1275fbf570d21dde01a00af83ed4a743d1884e4a09cebce0dd21ae254c&amp;datakey=7c96a0537ab2aaac9cfe0eca217732f4e10791625b4ab4c17e4d91c8078713b9"
</code></pre></div><h1 id='registry'>Registry</h1>
<p>The registry allows getting and setting registry entries with a user&#39;s key and a
data key (e.g. the name of an app).</p>

<p>Registry entries contain data (currently capped at 113 bytes), the data key, and
a revision number. The revision number increases every time the registry entry
is changed. The latest revision number, plus at least one, is required when
calling <code>setEntry</code>. Previous revisions are not accessible once an entry has been
overwritten with a higher revision number.</p>

<aside class="warning">
These functions have only been implemented for Browser JS at the moment.
</aside>
<h2 id='getting-data-from-the-registry'>Getting Data From The Registry</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-X</span> GET <span class="nt">-G</span> <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="nt">-u</span> <span class="s2">""</span>:&lt;apipassword&gt; <span class="nt">-d</span> <span class="s2">"publickey=ed25519%3Ab4f9e43178222cf33bd4432dc1eca49499397ecd1f7de23b568f3fa1e72e5c7c"</span> <span class="nt">-d</span> <span class="s2">"datakey=79c05b4b67764ad99a7976a7d2fb1cfce4f196ea217ef0356af042cb5492bd5d"</span> <span class="s2">"https://siasky.net/skynet/registry"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span><span class="p">,</span> <span class="nx">genKeyPairFromSeed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">publicKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">genKeyPairFromSeed</span><span class="p">(</span><span class="dl">"</span><span class="s2">this seed should be fairly long for security</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">dataKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">getEntryExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">entry</span><span class="p">,</span> <span class="nx">signature</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">getEntry</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id='method'>Method</h3>
<p><code>getEntry</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>publicKey</code></td>
<td><code>string</code></td>
<td>User&#39;s public key as a hex-encoded string. Can be generated with the <code>genKeyPairFromSeed</code> function.</td>
</tr>
<tr>
<td><code>dataKey</code></td>
<td><code>string</code></td>
<td>The key of the data to fetch for the given user.</td>
</tr>
<tr>
<td><code>customOptions</code></td>
<td><code>Object</code></td>
<td>Custom options to pass into this method. See below.</td>
</tr>
</tbody></table>
<h3 id='optional-parameters'>Optional Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>endpointGetEntry</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>/skynet/registry</code></td>
</tr>
<tr>
<td><code>hashedDataKeyHex</code></td>
<td>Whether the data key is already hashed and in hex format. If not, we hash the data key.</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
  <span class="nl">entry</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">datakey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">revision</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">},</span>
  <span class="nx">signature</span><span class="p">:</span> <span class="dl">"</span><span class="s2">788dddf5232807611557a3dc0fa5f34012c2650526ba91d55411a2b04ba56164</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div><h2 id='setting-data-on-the-registry'>Setting Data On The Registry</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="nt">-d</span> <span class="s1">'{"publickey":{"algorithm":"ed25519","key":[180,249,228,49,120,34,44,243,59,212,67,45,193,236,164,148,153,57,126,205,31,125,226,59,86,143,63,161,231,46,92,124]},"datakey":"79c05b4b67764ad99a7976a7d2fb1cfce4f196ea217ef0356af042cb5492bd5d","revision":7,"data":[65,65,65,118,74,68,105,95,101,102,75,76,101,99,83,65,112,78,56,110,89,113,84,110,122,83,106,76,116,102,66,55,80,99,69,110,81,112,75,75,101,79,88,100,54,119],"signature":[2,105,4,22,162,190,49,191,180,70,89,91,4,177,81,87,79,175,225,40,224,69,173,193,113,227,225,106,48,121,221,1,119,92,253,115,198,90,142,167,2,108,245,249,217,99,112,174,87,117,213,5,105,162,191,242,129,103,244,126,136,68,33,11]}'</span> <span class="s2">"https://siasky.net/skynet/registry"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span><span class="p">,</span> <span class="nx">genKeyPairFromSeed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">privateKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">genKeyPairFromSeed</span><span class="p">(</span><span class="dl">"</span><span class="s2">this seed should be fairly long for security</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">dataKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">bar</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">revision</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">revision</span> <span class="p">};</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">setEntryExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">setEntry</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span> <span class="nx">entry</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id='method-2'>Method</h3>
<p><code>setEntry</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>privateKey</code></td>
<td><code>string</code></td>
<td>User&#39;s private key as a hex-encoded string. Can be generated with the <code>genKeyPairFromSeed</code> function or with PKI in the node-forge library on NPM. Should be kept secret.</td>
</tr>
<tr>
<td><code>entry</code></td>
<td><code>RegistryEntry</code></td>
<td>The registry entry to set. See below.</td>
</tr>
<tr>
<td><code>customOptions</code></td>
<td><code>Object</code></td>
<td>Custom options to pass into this method. See below.</td>
</tr>
</tbody></table>
<h3 id='optional-parameters-2'>Optional Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>endpointSetEntry</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>/skynet/registry</code></td>
</tr>
<tr>
<td><code>hashedDataKeyHex</code></td>
<td>Whether the data key is already hashed and in hex format. If not, we hash the data key.</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h3 id='registryentry'><code>RegistryEntry</code></h3>
<p>This object corresponds to a versioned entry in the registry.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>datakey</code></td>
<td><code>string</code></td>
<td>The key of the data for the given entry.</td>
</tr>
<tr>
<td><code>data</code></td>
<td><code>string</code></td>
<td>The data for this entry. Capped at 113 bytes, but can be a skylink or an HNS domain.</td>
</tr>
<tr>
<td><code>revision</code></td>
<td><code>number</code></td>
<td>The revision number of this entry. It must be at least 1 more than the latest revision number, or 0 if the entry doesn&#39;t exist.</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<p>Empty on success.</p>
<h1 id='mysky'>MySky</h1>
<p>MySky is a decentralized identity protocol that gives users their own empire of
data within Skynet. Everything that happens inside of that empire is under the
control of the user, but it can also be visited by anyone else and shared around
freely.</p>

<p>MySky provides a standard for declaring data in a way that makes it easy for
anyone in the world to discover that data. At the same time, it provides
standards for protecting that data, ensuring only data which is meant to be
found is discoverable by others.</p>

<p>MySky also provides simple yet powerful tooling that enables applications to
make use of the same data. For example, the profile information of a user like
their preferred name and avatar can be placed in a shared folder, and then
safely used and updated by all of the user’s applications. This tooling extends
to any type of data.</p>

<p>See <a href="https://blog.sia.tech/mysky-your-home-on-the-global-operating-system-of-the-future-5a288f89825c">this blog
post</a>
for more information!</p>
<h2 id='initializing-mysky'>Initializing MySky</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">hostApp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">host-app.hns</span><span class="dl">"</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">mySkyExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Initialize MySky.</span>
    <span class="kd">const</span> <span class="nx">mySky</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">loadMySky</span><span class="p">(</span><span class="nx">hostApp</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>MySky can be initialized using the client. This creates the MySky iframe which
connects to the MySky handshake domain and takes care of operations such as
logging in silently, signing registry entries, getting the user ID, and logging
out.</p>

<aside class="warning">
Note that an initialized MySky instance does <b>not</b> have a logged-in user
yet! See the section below on how to log in the user.
</aside>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skappDomain</code></td>
<td>(Optional) The data domain for the skapp. MySky will automatically request permissions for this domain.</td>
</tr>
</tbody></table>

<aside class="success">
If the skapp domain matches the requestor domain (e.g. the `skappDomain` is
"app.hns" and your skapp is located at "app.hns") full permissions will be
granted automatically, by default.
</aside>
<h3 id='additional-options'>Additional Options</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>dev</code></td>
<td>Whether to run MySky in dev mode (all requested permissions are granted by default, but production MySky data is not accessible).</td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>debug</code></td>
<td>Whether to run MySky and all DACs with debugging messages enabled. DACs will run with the <code>?debug=true</code> query parameter set which they can use for their own purposes.</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h2 id='adding-dacs'>Adding DACs</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ContentRecordDAC</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@skynetlabs/content-record-library</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">hostApp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">host-app.hns</span><span class="dl">"</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">loadDacsExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mySky</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">loadMySky</span><span class="p">(</span><span class="nx">hostApp</span><span class="p">);</span>

    <span class="c1">// Initialize DAC, auto-adding permissions.</span>
    <span class="kd">const</span> <span class="nx">dac</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ContentRecordDAC</span><span class="p">()</span>
    <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">loadDacs</span><span class="p">(</span><span class="nx">dac</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<aside class="success">
DAC stands for "Data Access Controller". Find out more about DACs at
<a href="https://blog.sia.tech/mysky-your-home-on-the-global-operating-system-of-the-future-5a288f89825c">this blog post</a>.
</aside>

<p>This method loads the given DACs. They must have been instantiated previously
using the DAC library&#39;s constructor, which creates the iframe for the DAC. DACs
must also be loaded before they are ready to use.</p>

<p>Loading a DAC automatically adds its requested permissions to the permissions
list, so we do not need to add permissions for it manually. The user may have to
approve the DAC&#39;s permissions if it requests nonstandard permissions.</p>

<p>For an example of a DAC and its usage, see the
<a href="https://github.com/SkynetLabs/content-record-library">content-record</a> DAC
library provided by SkynetLabs.</p>
<h3 id='method'>Method</h3>
<p><code>mySky.loadDacs</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>...dacs</code></td>
<td><code>...DacLibrary[]</code></td>
<td>One or more DACs. If you have an array, you can pass it in like <code>...dacsArray</code>.</td>
</tr>
</tbody></table>
<h2 id='adding-custom-permissions'>Adding Custom Permissions</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Permission</span><span class="p">,</span> <span class="nx">PermCategory</span><span class="p">,</span> <span class="nx">PermType</span><span class="p">,</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">addPermissionsExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mySky</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">loadMySky</span><span class="p">();</span>

    <span class="c1">// Add additional needed permissions before checkLogin.</span>
    <span class="c1">// Can be Permissions object or list of Permissions objects</span>
    <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">addPermissions</span><span class="p">(</span><span class="k">new</span> <span class="nx">Permission</span><span class="p">(</span><span class="dl">"</span><span class="s2">requestor.hns</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">domain.hns/path</span><span class="dl">"</span><span class="p">,</span> <span class="nx">PermCategory</span><span class="p">.</span><span class="nx">Hidden</span><span class="p">,</span> <span class="nx">PermType</span><span class="p">.</span><span class="nx">Write</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This method lets you add one or more custom permissions, which are then
requested on login and must be approved by the user. It is useful to call this
if you want access to e.g. the data domain of a skapp other than your own.</p>

<p>Note that the requestor must be set manually in the <code>Permission</code> object. For
example, if you know that your skapp lives at <code>requestor.hns</code>, the requestor
should be <code>&quot;requestor.hns&quot;</code>.</p>

<p>You can request permission for either the entire domain or just a specific path.
For more information about valid paths please consult <a href="#mysky-paths">MySky
Paths</a>.</p>
<h3 id='method-2'>Method</h3>
<p><code>mySky.addPermissions</code></p>
<h3 id='parameters-3'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>...permissions</code></td>
<td><code>...Permission[]</code></td>
<td>One or more permissions. If you have an array, you can pass it in like <code>...permsArray</code>.</td>
</tr>
</tbody></table>
<h3 id='permission'><code>Permission</code></h3>
<p>This object corresponds to a permission for a given requestor domain for the given path.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>requestor</code></td>
<td><code>string</code></td>
<td>The requestor domain.</td>
</tr>
<tr>
<td><code>path</code></td>
<td><code>string</code></td>
<td>The path to grant permission for. Can be a directory or a root domain to grant permissions to all subpaths.</td>
</tr>
<tr>
<td><code>category</code></td>
<td><code>PermCategory</code></td>
<td>The permission category (see below).</td>
</tr>
<tr>
<td><code>permType</code></td>
<td><code>PermType</code></td>
<td>The permission type (see below).</td>
</tr>
</tbody></table>
<h3 id='permcategory'><code>PermCategory</code></h3>
<p>Permission category enum. All values are numbers. If you&#39;re not using
Typescript, you can use the provided constant instead of the enum value.</p>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
<th>Constant</th>
</tr>
</thead><tbody>
<tr>
<td><code>PermCategory.Discoverable</code></td>
<td>Permission for discoverable files.</td>
<td><code>PermDiscoverable</code></td>
</tr>
<tr>
<td><code>PermCategory.Hidden</code></td>
<td>Permission for hidden files.</td>
<td><code>PermHidden</code></td>
</tr>
<tr>
<td><code>PermCategory.LegacySkyID</code></td>
<td>Permission for legacy SkyID files.</td>
<td><code>PermLegacySkyID</code></td>
</tr>
</tbody></table>
<h3 id='permtype'><code>PermType</code></h3>
<p>Permission type enum. All values are numbers. If you&#39;re not using Typescript,
you can use the provided constant instead of the enum value.</p>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
<th>Constant</th>
</tr>
</thead><tbody>
<tr>
<td><code>PermType.Read</code></td>
<td>Permission for reading.</td>
<td><code>PermRead</code></td>
</tr>
<tr>
<td><code>PermType.Write</code></td>
<td>Permission for writing.</td>
<td><code>PermWrite</code></td>
</tr>
</tbody></table>
<h2 id='mysky-paths'>MySky Paths</h2>
<p>When calling methods to write or get data, a path must be passed in. Paths can
point to a file or a directory; examples include
<code>skyfeed.hns/path/to/file.json</code> and <code>riftapp.hns/some/directory</code>.</p>

<p>All data
lives at a certain path. Likewise, all paths have associated permissions. So a
skapp cannot access a path, and its data, if it doesn&#39;t have permission with
MySky to do so.</p>
<h3 id='path-format'>Path format</h3>
<p>Paths have a specific format that they must follow. All paths must start with a
data domain, which usually is the domain of a skapp on Skynet, such as
<code>riftapp.hns</code>. <strong>Note:</strong> this should <strong>not</strong> include the portal, such as
<code>riftapp.hns.siasky.net</code>. Use <code>await client.extractDomain(url)</code> if you have a
full URL and need the domain.</p>

<p>The path may just be a data domain, for example when a skapp is requesting
permissions for all files at a domain. The path may also contain a path to a
file or directory after the data domain, with each path element separated by a
forward slash.</p>
<h3 id='examples'>Examples</h3>
<p>Valid paths include:</p>

<pre class="not_example">
"app.hns"
"app.hns/"
"app.hns/path/file.json"
"app.hns/path/"
"app.hns/path"
</pre>

<p>Invalid paths include:</p>

<pre class="not_example">
"/app.hns"
"/app.hns/path/"
"/"
""
</pre>
<h2 id='logging-in'>Logging In</h2>
<p>In order to actually use MySky the user will need to be logged in to a MySky
account. Most of the time, the user should already be logged in -- a single
sign-in should log a user into all MySky-compatible apps across the Skynet
ecosystem.</p>

<p>For that reason, your app should first attempt a silent login. If that fails,
you can initiate a popup login, where the user has the chance to enter his login
details or sign up. Note that this must be done <em>only</em> on button click, or the
popup window will be blocked by most popup blockers!</p>
<h2 id='check-login-silent-login'>Check Login (Silent Login)</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">hostApp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">host-app.hns</span><span class="dl">"</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">checkLoginExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mySky</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">loadMySky</span><span class="p">(</span><span class="nx">hostApp</span><span class="p">);</span>

    <span class="c1">// Try to login silently, requesting permissions for host-app.hns.</span>
    <span class="kd">const</span> <span class="nx">loggedIn</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">checkLogin</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Makes an initial silent login attempt with the previously set permissions.</p>
<h3 id='method-3'>Method</h3>
<p><code>mySky.checkLogin</code></p>
<h3 id='parameters-4'>Parameters</h3>
<p>None. Any requested permissions should be set earlier through <code>mySky.addPermissions</code>.</p>
<h3 id='response'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="kc">true</span>
</code></pre></div><h2 id='request-login-access-popup-login'>Request Login Access (Popup Login)</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">hostApp</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">host-app.hns</span><span class="dl">"</span><span class="p">;</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">requestLoginAccessExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">mySky</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">loadMySky</span><span class="p">(</span><span class="nx">hostApp</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">loggedIn</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">checkLogin</span><span class="p">();</span>

    <span class="c1">// Add button action for login.</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">loggedIn</span><span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span>
        <span class="p">.</span><span class="nx">getElementByID</span><span class="p">(</span><span class="dl">"</span><span class="s2">login-button</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">click</span><span class="dl">"</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">mySky</span><span class="p">.</span><span class="nx">requestLoginAccess</span><span class="p">();</span>
        <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Popup login method to call if the silent login failed.</p>

<aside class="warning">
Note that this must be done *only* on button click, or the popup window will be
blocked by most popup blockers!
</aside>
<h3 id='method-4'>Method</h3>
<p><code>mySky.requestLoginAccess</code></p>
<h3 id='parameters-5'>Parameters</h3>
<p>None. Any requested permissions should be set earlier through <code>mySky.addPermissions</code>.</p>
<div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="kc">true</span>
</code></pre></div><h2 id='logout'>Logout</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">async</span> <span class="kd">function</span> <span class="nx">logoutExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">logout</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Logout method that can be called if the user is logged in. Note that the <code>MySky</code>
instance cannot be used to access data until the user logs in again.</p>
<h3 id='method-5'>Method</h3>
<p><code>mySky.logout</code></p>
<h3 id='parameters-6'>Parameters</h3>
<p>None.</p>
<h2 id='getting-and-setting-user-data'>Getting And Setting User Data</h2>
<p>Once a user is logged in, the app will be able to get and set data in the user&#39;s
filesystem, as long as the app has permissions for the filepath it is trying to
access as well as for the type of data (Discoverable or Hidden) being read or
written.</p>

<aside class="success">
MySky enforces that apps trying to access a user's filesystem have permission by
looking at the <i>referrer</i> for requests. The permissions provider will
determine whether permission had previously been granted to that requestor for
the requested filepath.
</aside>
<h2 id='getting-discoverable-json'>Getting Discoverable JSON</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="c1">// Assume we have a logged-in mysky instance from above</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">getJSONExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Get discoverable JSON data from the given path.</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">dataLink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="dl">"</span><span class="s2">app.hns/path/file.json</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This method gets discoverable JSON. It does not require permissions because all
discoverable data can be read publicly.</p>
<h3 id='method-6'>Method</h3>
<p><code>mySky.getJSON</code></p>
<h3 id='parameters-7'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td><code>string</code></td>
<td>The data path.</td>
</tr>
<tr>
<td><code>customOptions</code></td>
<td><code>Object</code></td>
<td>Custom options to pass into this method. See below.</td>
</tr>
</tbody></table>
<h3 id='optional-parameters'>Optional Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>cachedDataLink</code></td>
<td>The latest known data link. If the data link at the registry entry is the same, then skip downloading the file again.</td>
<td><code>undefined</code></td>
</tr>
<tr>
<td><code>endpointDownload</code></td>
<td>The relative URL path of the portal endpoint to contact for downloads.</td>
<td><code>/</code></td>
</tr>
<tr>
<td><code>endpointGetEntry</code></td>
<td>The relative URL path of the portal endpoint to contact for the registry.</td>
<td><code>/skynet/registry</code></td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
  <span class="nl">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">example</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This is some example JSON data.</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="nx">dataLink</span><span class="p">:</span> <span class="dl">"</span><span class="s2">sia://CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div><h2 id='setting-discoverable-json'>Setting Discoverable JSON</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="c1">// Assume we have a logged-in mysky instance from above</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">setJSONExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Set discoverable JSON data at the given path. The return type is the same as getJSON.</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">dataLink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">setJSON</span><span class="p">(</span><span class="dl">"</span><span class="s2">app.hns/path/file.json</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span> <span class="p">});</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This method sets discoverable JSON. It requires Discoverable Write permissions
for the given path.</p>
<h3 id='method-7'>Method</h3>
<p><code>mySky.setJSON</code></p>
<h3 id='parameters-8'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td><code>string</code></td>
<td>The data path.</td>
</tr>
<tr>
<td><code>json</code></td>
<td><code>Object</code></td>
<td>The data to set.</td>
</tr>
<tr>
<td><code>customOptions</code></td>
<td><code>Object</code></td>
<td>Custom options to pass into this method. See below.</td>
</tr>
</tbody></table>
<h3 id='optional-parameters-2'>Optional Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>endpointGetEntry</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>/skynet/registry</code></td>
</tr>
<tr>
<td><code>endpointSetEntry</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>/skynet/registry</code></td>
</tr>
</tbody></table>
<h3 id='response-3'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
  <span class="nl">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">example</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This is some example JSON data.</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="nx">dataLink</span><span class="p">:</span> <span class="dl">"</span><span class="s2">sia://CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg</span><span class="dl">"</span>
<span class="p">}</span>
</code></pre></div><h2 id='getting-encrypted-json'>Getting Encrypted JSON</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="c1">// Assume we have a logged-in mysky instance from above</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">getJSONEncryptedExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Get encrypted JSON data from the given path.</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">getJSONEncrypted</span><span class="p">(</span><span class="dl">"</span><span class="s2">app.hns/path/file.json</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This method gets encrypted JSON. It requires Hidden Read permissions for the given path.</p>
<h3 id='method-8'>Method</h3>
<p><code>mySky.getJSONEncrypted</code></p>
<h3 id='parameters-9'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td><code>string</code></td>
<td>The data path.</td>
</tr>
<tr>
<td><code>customOptions</code></td>
<td><code>Object</code></td>
<td>Custom options to pass into this method. See below.</td>
</tr>
</tbody></table>
<h3 id='optional-parameters-3'>Optional Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>cachedDataLink</code></td>
<td>The latest known data link. If the data link at the registry entry is the same, then skip downloading the file again.</td>
<td><code>undefined</code></td>
</tr>
<tr>
<td><code>endpointDownload</code></td>
<td>The relative URL path of the portal endpoint to contact for downloads.</td>
<td><code>/</code></td>
</tr>
<tr>
<td><code>endpointGetEntry</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>/skynet/registry</code></td>
</tr>
</tbody></table>
<h3 id='response-4'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
  <span class="nl">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">example</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This is some example JSON data.</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h2 id='setting-encrypted-json'>Setting Encrypted JSON</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="c1">// Assume we have a logged-in mysky instance from above</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">setJSONEncryptedExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="c1">// Set encrypted JSON data at the given path. The return type is the same as getJSONEncrypted.</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">mySky</span><span class="p">.</span><span class="nx">setJSONEncrypted</span><span class="p">(</span><span class="dl">"</span><span class="s2">app.hns/path/file.json</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">message</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span> <span class="p">});</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>This method sets encrypted JSON. It requires Hidden Write permissions for the
given path.</p>
<h3 id='method-9'>Method</h3>
<p><code>mySky.setJSONEncrypted</code></p>
<h3 id='parameters-10'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td><code>string</code></td>
<td>The data path.</td>
</tr>
<tr>
<td><code>json</code></td>
<td><code>Object</code></td>
<td>The data to set.</td>
</tr>
<tr>
<td><code>customOptions</code></td>
<td><code>Object</code></td>
<td>Custom options to pass into this method. See below.</td>
</tr>
</tbody></table>
<h3 id='optional-parameters-4'>Optional Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>endpointGetEntry</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>/skynet/registry</code></td>
</tr>
<tr>
<td><code>endpointSetEntry</code></td>
<td>The relative URL path of the portal endpoint to contact.</td>
<td><code>/skynet/registry</code></td>
</tr>
</tbody></table>
<h3 id='response-5'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
  <span class="nl">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">example</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This is some example JSON data.</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h1 id='crypto-utilities'>Crypto Utilities</h1>
<p>This page documents cryptographic utilities for generating public and private
keys as well as secure seeds. Private keys should, as the name implies, be kept
private. The seeds should also be handled carefully as they can be used to
derive public/private key pairs.</p>
<h2 id='generating-key-pairs-and-seeds'>Generating Key Pairs And Seeds</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">genKeyPairAndSeed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">publicKey</span><span class="p">,</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">genKeyPairAndSeed</span><span class="p">();</span>
</code></pre></div>
<p>If you do not yet have a seed, you can generate one with this function and it
will also generate an associated key pair. The seed is generated using strong,
cryptographic-grade randomness. It is recommended that you only store the seed
for later use and re-derive the key pair with <code>genKeyPairFromSeed</code>, and that you
store it securely.</p>
<h3 id='function'>Function</h3>
<p><code>genKeyPairAndSeed</code></p>
<h3 id='parameters'>Parameters</h3>
<p>None</p>
<h3 id='response'>Response</h3><div class="highlight"><pre class="highlight plaintext"><code>{
  publicKey: "f8a7da8324fabb9d57bb32c59c48d4ba304d08ee5f1297a46836cf841da71c80",
  privateKey: "c404ff07fba961000dfb25ece7477f45b109b50a5169a45f3fb239343002c1cff8a7da8324fabb9d57bb32c59c48d4ba304d08ee5f1297a46836cf841da71c80",
  seed: "c1197e1275fbf570d21dde01a00af83ed4a743d1884e4a09cebce0dd21ae254c"
}
</code></pre></div><h2 id='generating-key-pairs-from-seeds'>Generating Key Pairs From Seeds</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">genKeyPairFromSeed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">publicKey</span><span class="p">,</span> <span class="nx">privateKey</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">genKeyPairFromSeed</span><span class="p">(</span><span class="dl">"</span><span class="s2">this seed should be fairly long for security</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div>
<p>If you already have a seed (e.g. from a previous call to <code>genKeyPairAndSeed</code>) you
can deterministically derive the same keypair.</p>
<h3 id='function-2'>Function</h3>
<p><code>genKeyPairFromSeed</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>seed</code></td>
<td><code>string</code></td>
<td>The seed that should be used to generate a deterministic keypair. Can be a long and secure passphrase.</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3><div class="highlight"><pre class="highlight plaintext"><code>{
  publicKey: "f8a7da8324fabb9d57bb32c59c48d4ba304d08ee5f1297a46836cf841da71c80",
  privateKey: "c404ff07fba961000dfb25ece7477f45b109b50a5169a45f3fb239343002c1cff8a7da8324fabb9d57bb32c59c48d4ba304d08ee5f1297a46836cf841da71c80",
}
</code></pre></div><h2 id='deriving-child-seeds'>Deriving Child Seeds</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">deriveChildSeed</span><span class="p">,</span> <span class="nx">genKeyPairAndSeed</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">publicKey</span><span class="p">,</span> <span class="nx">privateKey</span><span class="p">,</span> <span class="nx">masterSeed</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">genKeyPairAndSeed</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">childSeed</span> <span class="o">=</span> <span class="nx">deriveChildSeed</span><span class="p">(</span><span class="nx">masterSeed</span><span class="p">,</span> <span class="dl">"</span><span class="s2">foo</span><span class="dl">"</span><span class="p">);</span>
</code></pre></div>
<p>This function can be used to derive a child seed from a given master seed and
subseed. For example, the master seed can be a long and secure passphrase while
the subseed can be the name of an application.</p>
<h3 id='function-3'>Function</h3>
<p><code>deriveChildSeed</code></p>
<h3 id='parameters-3'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>masterSeed</code></td>
<td><code>string</code></td>
<td>The master seed that should be used to generate a deterministic keypair. Can be a long and secure passphrase.</td>
</tr>
<tr>
<td><code>seed</code></td>
<td><code>string</code></td>
<td>The subseed that, in combination with the master seed, results in a deterministic keypair.</td>
</tr>
</tbody></table>
<h3 id='response-3'>Response</h3><div class="highlight"><pre class="highlight plaintext"><code>"f79cd29b92124c80a662f3085bba98955f7defbaed6e58ea891b901dc99aafc0"
</code></pre></div><h1 id='handshake'>Handshake</h1>
<p><a href="https://handshake.org/">Handshake</a> is a protocol which allows the creation of
update-able content with persistent links, backed by the Skynet infrastructure.
For more information on using Handshake with Skynet, please see <a href="https://blog.sia.tech/skynet-handshake-d5d16e6b632f">this blog
post</a>.</p>

<p>The SDKs contain support for downloading from Handshake domains as well as for
resolving Handshake domains to retrieve the underlying skylinks.</p>
<h2 id='downloading-handshake-files'>Downloading Handshake Files</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"https://siasky.net/hns/doesn"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># NOTE: this function has not yet been implemented for this SDK.</span>

skynet hns download <span class="s2">"doesn"</span> <span class="s2">"./dst.html"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">domain</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">doesn</span><span class="dl">"</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="nx">client</span><span class="p">.</span><span class="nx">downloadFileHns</span><span class="p">(</span><span class="nx">domain</span><span class="p">);</span>
  <span class="c1">// Or client.openFileHns(domain) to open it in a new browser tab.</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="err">#</span> <span class="nx">NOTE</span><span class="p">:</span> <span class="k">this</span> <span class="kd">function</span> <span class="nx">has</span> <span class="nx">not</span> <span class="nx">yet</span> <span class="nx">been</span> <span class="nx">implemented</span> <span class="k">for</span> <span class="k">this</span> <span class="nx">SDK</span><span class="p">.</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">domain</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">doesn</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">downloadFileHns</span><span class="p">(</span><span class="dl">"</span><span class="s2">./dst.html</span><span class="dl">"</span><span class="p">,</span> <span class="nx">domain</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Handshake download successful</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># NOTE: this function has not yet been implemented for this SDK.
</span>
<span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">()</span>
<span class="n">domain</span> <span class="o">=</span> <span class="s">"doesn"</span>

<span class="n">client</span><span class="p">.</span><span class="n">download_file_hns</span><span class="p">(</span><span class="s">"./dst.html"</span><span class="p">,</span> <span class="n">domain</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Handshake download successful"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="c">// NOTE: this function has not yet been implemented for this SDK.</span>

<span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">const</span> <span class="n">domain</span> <span class="o">=</span> <span class="s">"doesn"</span>

    <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">DownloadFileHns</span><span class="p">(</span><span class="s">"./dst.html"</span><span class="p">,</span> <span class="n">domain</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultDownloadHnsOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Something went wrong, please try again.</span><span class="se">\n</span><span class="s">Error: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Handshake download successful"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>This function downloads a file from a given Handshake domain on the portal&#39;s
<code>/hns</code> endpoint. To give an example, the full URL of the Sia-controlled
Handshake domain <code>doesn</code> is <code>https://siasky.net/hns/doesn</code>.</p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>path</code></td>
<td>The local path where the file should be downloaded to.</td>
</tr>
<tr>
<td><code>domain</code></td>
<td>The Handshake domain that should be downloaded.</td>
</tr>
</tbody></table>

<p><em>Browser JS:</em></p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>domain</code></td>
<td>The Handshake domain that should be downloaded.</td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<p>Empty on success.</p>
<h2 id='resolving-handshake-domains'>Resolving Handshake Domains</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="s2">"https://siasky.net/hnsres/doesn"</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code><span class="c"># NOTE: this function has not yet been implemented for this SDK.</span>

skynet hns resolve <span class="s2">"doesn"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">domain</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">doesn</span><span class="dl">"</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">resolveHns</span><span class="p">(</span><span class="nx">domain</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="err">#</span> <span class="nx">NOTE</span><span class="p">:</span> <span class="k">this</span> <span class="kd">function</span> <span class="nx">has</span> <span class="nx">not</span> <span class="nx">yet</span> <span class="nx">been</span> <span class="nx">implemented</span> <span class="k">for</span> <span class="k">this</span> <span class="nx">SDK</span><span class="p">.</span>

<span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">domain</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">doesn</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">resolveHns</span><span class="p">(</span><span class="nx">domain</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Handshake resolve successful</span><span class="dl">'</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="c1"># NOTE: this function has not yet been implemented for this SDK.
</span>
<span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">()</span>
<span class="n">domain</span> <span class="o">=</span> <span class="s">"doesn"</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">resolve_hns</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Handshake resolve successful"</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="c">// NOTE: this function has not yet been implemented for this SDK.</span>

<span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">const</span> <span class="n">domain</span> <span class="o">=</span> <span class="s">"doesn"</span>
<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">ResolveHns</span><span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultResolveHnsOptions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Something went wrong, please try again.</span><span class="se">\n</span><span class="s">Error: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="s">"Handshake resolve successful"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>This function resolves a given Handshake domain and returns its TXT record. In
the context of Skynet, this should contain a <code>skylink</code> field. For example, a
request to <code>https://siasky.net/hnsres/doesn</code> returns only the data
<code>{&quot;skylink&quot;:&quot;sia://IAC6CkhNYuWZqMVr1gob1B6tPg4MrBGRzTaDvAIAeu9A9w&quot;}</code>.</p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>domain</code></td>
<td>The Handshake domain that should be resolved.</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3><div class="highlight"><pre class="highlight shell tab-shell--curl"><code><span class="o">{</span><span class="s2">"skylink"</span>:<span class="s2">"sia://IAC6CkhNYuWZqMVr1gob1B6tPg4MrBGRzTaDvAIAeu9A9w"</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>Coming Soon
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span><span class="dl">"</span><span class="s2">skylink</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">sia://IAC6CkhNYuWZqMVr1gob1B6tPg4MrBGRzTaDvAIAeu9A9w</span><span class="dl">"</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="p">{</span><span class="dl">"</span><span class="s2">skylink</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">sia://IAC6CkhNYuWZqMVr1gob1B6tPg4MrBGRzTaDvAIAeu9A9w</span><span class="dl">"</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="p">{</span><span class="s">"skylink"</span><span class="p">:</span><span class="s">"sia://IAC6CkhNYuWZqMVr1gob1B6tPg4MrBGRzTaDvAIAeu9A9w"</span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="p">{</span><span class="s">"skylink"</span><span class="o">:</span><span class="s">"sia://IAC6CkhNYuWZqMVr1gob1B6tPg4MrBGRzTaDvAIAeu9A9w"</span><span class="p">}</span>
</code></pre></div>
<p>The full TXT record containing the skylink is returned.</p>
<h1 id='browser-js-api'>Browser JS API</h1>
<p>The following are some methods and utilities that only make sense in the
browser, and thus are only provided by the Browser JS SDK.</p>
<h2 id='opening-a-file'>Opening A File</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">openFile</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span>
</code></pre></div>
<p>Use the client to open a skylink in a new browser tab. Browsers support opening
natively only limited file extensions like <code>.html</code> or <code>.jpg</code> and will fallback
to downloading the file.</p>
<h3 id='parameters'>Parameters</h3>
<p>See <a href="#downloading-a-file">Downloading A File</a>.</p>
<h3 id='response'>Response</h3>
<p>Empty on success.</p>
<h2 id='loading-a-file-39-s-contents'>Loading A File&#39;s Contents</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">AACJjVpOpsZ6c9PBwOYvxTtDc_nmrGxTTEomHDBEEfvRhA</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// JSON File</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">contentType</span><span class="p">,</span> <span class="nx">metadata</span><span class="p">,</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getFileContent</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">fruit</span><span class="p">)</span> <span class="c1">// prints 'Apple'</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Use the client to load a skylink&#39;s content for use by application.</p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>The skylink that should be downloaded. The skylink can contain an optional path.</td>
</tr>
</tbody></table>
<h3 id='additional-options'>Additional Options</h3>
<p>See <a href="#downloading-a-file">Downloading A File</a>.</p>
<h3 id='response-2'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="p">{</span>
  <span class="nl">data</span><span class="p">:</span> <span class="p">{</span> <span class="na">fruit</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Apple</span><span class="dl">'</span><span class="p">,</span> <span class="na">size</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Large</span><span class="dl">'</span><span class="p">,</span> <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Red</span><span class="dl">'</span> <span class="p">},</span>
  <span class="nx">contentType</span><span class="p">:</span> <span class="dl">'</span><span class="s1">application/json</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">metadata</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">filename</span><span class="p">:</span> <span class="dl">'</span><span class="s1">example_1.json</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">length</span><span class="p">:</span> <span class="mi">65</span><span class="p">,</span>
    <span class="nx">subfiles</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">example_1.json</span><span class="dl">'</span><span class="p">:</span> <span class="p">[</span><span class="nb">Object</span><span class="p">]</span> <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">skylink</span><span class="p">:</span> <span class="dl">'</span><span class="s1">sia:AACJjVpOpsZ6c9PBwOYvxTtDc_nmrGxTTEomHDBEEfvRhA</span><span class="dl">'</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>data</code></td>
<td>Data returned in the response body when doing a GET request for the skylink.</td>
</tr>
<tr>
<td><code>skylink</code></td>
<td>This is the skylink that can be used when downloading to retrieve the file that has been uploaded. It is a 46-character base64 encoded string that consists of the merkle root, offset, fetch size, and Skylink version which can be used to access the content.</td>
</tr>
<tr>
<td><code>contentType</code></td>
<td>String representing the file&#39;s content type.</td>
</tr>
<tr>
<td><code>metadata</code></td>
<td>Object returned in the <code>skynet-metadata</code> header when accessing the file</td>
</tr>
</tbody></table>

<aside class="warning">
There are no checks in place for this method, and it is not advised to try and load the contents of excessively large files. You may want to run `getMetadata` first to check a file's size before running this method.
</aside>
<h2 id='getting-the-download-url'>Getting The Download URL</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getSkylinkUrl</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span>
</code></pre></div>
<p>Use the client to generate a direct <code>skylink</code> url.</p>
<h3 id='parameters-3'>Parameters</h3>
<p>See <a href="#downloading-a-file">Downloading A File</a>.</p>
<h3 id='additional-options-2'>Additional Options</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>download</code></td>
<td>Option to include download directive in the url that will force a download when used.</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h3 id='response-3'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="dl">"</span><span class="s2">https://siasky.net/XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>url</code></td>
<td>The URL for the given skylink on the client portal.</td>
</tr>
</tbody></table>
<h2 id='getting-a-handshake-url'>Getting A Handshake URL</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">domain</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">doesn</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getHnsUrl</span><span class="p">(</span><span class="nx">domain</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}();</span>
</code></pre></div>
<p>Use the client to generate a direct Handshake url from a Handshake domain.</p>
<h3 id='parameters-4'>Parameters</h3>
<p>See <a href="#downloading-handshake-files">Downloading Handshake Files</a>.</p>
<h3 id='additional-options-3'>Additional Options</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>download</code></td>
<td>Option to include download directive in the url that will force a download when used.</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h3 id='response-4'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="dl">"</span><span class="s2">https://siasky.net/hns/doesn</span><span class="dl">"</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>url</code></td>
<td>The URL for the given Handshake domain on the client portal.</td>
</tr>
</tbody></table>
<h2 id='getting-a-handshake-resolver-url'>Getting A Handshake Resolver URL</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">domain</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">doesn</span><span class="dl">"</span><span class="p">;</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getHnsresUrl</span><span class="p">(</span><span class="nx">domain</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span>
</code></pre></div>
<p>Use the client to generate a direct Handshake Resolver url from a Handshake
domain.</p>
<h3 id='parameters-5'>Parameters</h3>
<p>See <a href="#resolving-handshake-domains">Resolving Handshake Domains</a>.</p>
<h3 id='additional-options-4'>Additional Options</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead><tbody>
<tr>
<td><code>download</code></td>
<td>Option to include download directive in the url that will force a download when used.</td>
<td><code>false</code></td>
</tr>
</tbody></table>
<h3 id='response-5'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="dl">"</span><span class="s2">https://siasky.net/hnsres/doesn</span><span class="dl">"</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>url</code></td>
<td>The URL for the given Handshake Resolver domain on the client portal.</td>
</tr>
</tbody></table>
<h2 id='parsing-skylinks'>Parsing Skylinks</h2><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">parseSkylink</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>
<span class="kd">const</span> <span class="nx">uri</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">sia://XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg</span><span class="dl">"</span><span class="p">;</span>

<span class="k">try</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="nx">parseSkylink</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Extract a skylink from a string.</p>
<h3 id='parameters-6'>Parameters</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>string</code></td>
<td>The string to extract a skylink from.</td>
</tr>
</tbody></table>

<p>Currently supported string types are:</p>

<ul>
<li>direct skylink string, for example <code>&quot;XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg&quot;</code></li>
<li><code>sia:</code> prefixed string, for example <code>&quot;sia:XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg&quot;</code></li>
<li><code>sia://</code> prefixed string, for example <code>&quot;sia://XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg&quot;</code></li>
<li>skylink from url, for example <code>&quot;https://siasky.net/XABvi7JtJbQSMAcDwnUnmp2FKDPjg8_tTTFP4BwMSxVdEg&quot;</code></li>
</ul>
<h3 id='response-6'>Response</h3><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="dl">"</span><span class="s2">CABAB_1Dt0FJsxqsu_J4TodNCbCGvtFf1Uys_3EgzOlTcg</span><span class="dl">"</span>
</code></pre></div>
<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>skylink</code></td>
<td>See <a href="#uploading-a-file">Uploading A File</a>.</td>
</tr>
</tbody></table>
<h1 id='api-authentication'>API Authentication</h1><h2 id='skynet-portal-authentication'>Skynet Portal Authentication</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>Coming Soon
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>Coming Soon
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">authenticationExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="p">{</span> <span class="na">skynetAPIKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foobar</span><span class="dl">"</span> <span class="p">});</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span><span class="dl">"</span><span class="s2">./image.jpg</span><span class="dl">"</span><span class="p">,</span> <span class="p">{</span> <span class="na">skynetAPIKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foobar</span><span class="dl">"</span> <span class="p">});</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, skylink: </span><span class="p">${</span><span class="nx">skylink</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="n">Coming</span> <span class="n">Soon</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="n">Coming</span> <span class="n">Soon</span>
</code></pre></div>
<p>Certain Skynet portals are only available to signed-in or paid users. To access
these programmatically, you will need an API key. You can get an API key for
your user and pass it either to individual calls or to the Skynet client.</p>

<p><strong>Warning:</strong> Be careful not to leak your API key as it will allow malicious
attackers to compromise your account!</p>
<h3 id='obtaining-a-skynet-api-key'>Obtaining a Skynet API Key</h3>
<p><a href="https://docs.skynetlabs.com/developer-guides/server-hosted-skynet-usage#obtaining-your-skynet-api-key">Instructions</a></p>
<h2 id='local-node-authentication'>Local Node Authentication</h2><div class="highlight"><pre class="highlight shell tab-shell--curl"><code>curl <span class="nt">-X</span> POST <span class="nt">-A</span> <span class="s2">"Sia-Agent"</span> <span class="nt">--user</span> <span class="s2">""</span>:<span class="s2">"foobar"</span> <span class="se">\</span>
  <span class="s2">"https://siasky.net/skynet/skyfile"</span> <span class="nt">-F</span> <span class="s1">'file=@image.jpg'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell--cli"><code>skynet upload <span class="s2">"./image.jpg"</span> <span class="nt">--api-key</span> <span class="s2">"foobar"</span> <span class="nt">--custom-user-agent</span> <span class="s2">"Sia-Agent"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--browser"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="k">async</span> <span class="kd">function</span> <span class="nx">authenticationExample</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span>
      <span class="nx">file</span><span class="p">,</span>
      <span class="p">{</span> <span class="na">APIKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foobar</span><span class="dl">"</span><span class="p">,</span> <span class="na">customUserAgent</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sia-Agent</span><span class="dl">"</span> <span class="p">}</span>
    <span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript--node"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">SkynetClient</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">@skynetlabs/skynet-nodejs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SkynetClient</span><span class="p">();</span>

<span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">skylink</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">uploadFile</span><span class="p">(</span>
    <span class="dl">"</span><span class="s2">./image.jpg</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">{</span> <span class="na">APIKey</span><span class="p">:</span> <span class="dl">"</span><span class="s2">foobar</span><span class="dl">"</span><span class="p">,</span> <span class="na">customUserAgent</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Sia-Agent</span><span class="dl">"</span> <span class="p">}</span>
  <span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Upload successful, skylink: </span><span class="p">${</span><span class="nx">skylink</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">siaskynet</span> <span class="k">as</span> <span class="n">skynet</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="p">.</span><span class="n">SkynetClient</span><span class="p">();</span>

<span class="n">skylink</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">upload_file</span><span class="p">(</span>
  <span class="s">"image.jpg"</span><span class="p">,</span>
  <span class="p">{</span><span class="s">"api_key"</span><span class="p">:</span> <span class="s">"foobar"</span><span class="p">,</span> <span class="s">"custom_user_agent"</span><span class="p">:</span> <span class="s">"Sia-Agent"</span><span class="p">}</span>
<span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Upload successful, skylink: "</span> <span class="o">+</span> <span class="n">skylink</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre class="highlight go tab-go"><code><span class="k">package</span> <span class="n">main</span>

<span class="k">import</span> <span class="p">(</span>
    <span class="s">"fmt"</span>
    <span class="n">skynet</span> <span class="s">"github.com/SkynetLabs/go-skynet/v2"</span>
<span class="p">)</span>

<span class="k">var</span> <span class="n">client</span> <span class="o">=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">New</span><span class="p">()</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">opts</span> <span class="o">:=</span> <span class="n">skynet</span><span class="o">.</span><span class="n">DefaultUploadOptions</span>
    <span class="n">opts</span><span class="o">.</span><span class="n">APIKey</span> <span class="o">=</span> <span class="s">"foobar"</span>
  <span class="n">opts</span><span class="o">.</span><span class="n">CustomUserAgent</span> <span class="o">=</span> <span class="s">"Sia-Agent"</span>
    <span class="n">skylink</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">UploadFile</span><span class="p">(</span><span class="s">"./image.jpg"</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="nb">panic</span><span class="p">(</span><span class="s">"Unable to upload: "</span> <span class="o">+</span> <span class="n">err</span><span class="o">.</span><span class="n">Error</span><span class="p">())</span>
    <span class="p">}</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Upload successful, skylink: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">skylink</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>Portals will likely require authentication on several of their endpoints. This
is to prevent unwanted modifications to the blocklist, portal list, etc.</p>

<p>If you are authorized to use password-protected endpoints on a portal, you may
authenticate yourself by setting the <code>APIKey</code> custom option when calling a
function.</p>
<h3 id='setting-the-user-agent'>Setting The User Agent</h3>
<p>The portal may also require that certain sensitive requests contain a custom
user agent header, usually <code>Sia-Agent</code>. This is for security purposes, as
otherwise a malicious website could make requests to your local portal on your
behalf and steal coins.</p>

<p>We want this to be an opt-in for now, so <code>Sia-Agent</code> is not currently the
default. You may change the user agent header by setting the <code>customUserAgent</code>
custom option. See <a href="#setting-additional-options">Setting Additional Options</a>.</p>
<h3 id='more-information'>More Information</h3>
<p>For more information about authentication on portals and local <code>siad</code> instances
please see <a href="https://sia.tech/docs/#authentication">the Sia Docs</a>.</p>
<h1 id='updating-from-v3'>Updating From v3</h1>
<p><a href="https://github.com/SkynetLabs/skynet-js/blob/master/CHANGELOG.md">Changelog</a></p>

<!-- markdown-toc start - Don't edit this section. Run M-x markdown-toc-refresh-toc -->

<p><strong>Table of Contents</strong></p>

<ul>
<li><a href="#updating-from-v3">Updating From v3</a>

<ul>
<li><a href="#upgrading">Upgrading</a></li>
<li><a href="#installing-a-dac">Installing a DAC</a></li>
<li><a href="#breaking-changes">Breaking Changes</a>

<ul>
<li><a href="#skydb-getjson-returns-a-data-link-instead-of-a-revision-number">SkyDB getJSON returns a data link instead of a revision number</a></li>
<li><a href="#skydb-setjson-no-longer-accepts-an-optional-revision-number">SkyDB setJSON no longer accepts an optional revision number</a></li>
<li><a href="#getskylinkurl-downloadfile-openfile-and-the-hns-equivalents-are-all-now-async">getSkylinkUrl, downloadFile, openFile, and the HNS equivalents are all now async</a></li>
<li><a href="#portalurl-is-now-an-async-method-instead-of-a-variable">portalUrl is now an async method instead of a variable</a></li>
<li><a href="#renamed-registryentry-datakey-to-datakey-for-consistency">Renamed RegistryEntry datakey to dataKey for consistency</a></li>
<li><a href="#the-getentry-timeout-option-has-been-removed-as-it-no-longer-has-an-effect">The getEntry timeout option has been removed as it no longer has an effect</a></li>
<li><a href="#getfilecontent-and-getfilecontenthns-no-longer-return-metadata">getFileContent and getFileContentHns no longer return metadata</a></li>
<li><a href="#getmetadata-no-longer-returns-contenttype">getMetadata no longer returns contentType</a></li>
<li><a href="#registry-entries-now-take-data-that-is-type-uint8array-instead-of-string">Registry entries now take data that is type Uint8Array instead of string</a></li>
<li><a href="#the-sia-skylink-prefix-has-been-changed-to-sia">The sia: skylink prefix has been changed to sia://</a></li>
<li><a href="#skylinks-returned-from-skydb-all-start-with-sia">Skylinks returned from SkyDB all start with sia://</a></li>
</ul></li>
</ul></li>
</ul>

<!-- markdown-toc end -->

<p>Version <code>v4</code> is a breaking change coming from <code>v3</code>. In addition to some major
changes such as adding MySky and Data Access Controllers (DACs), this change
contains many quality-of-life changes. These include making some non-async
methods async, removing <code>revision</code> from SkyDB, and changing the return types of
the SkyDB methods.</p>

<p>We understand that updating your code to accommodate breaking changes is
inconvenient, so we put together this guide which we hope will be helpful.</p>
<h2 id='upgrading'>Upgrading</h2><div class="highlight"><pre class="highlight sh tab-shell"><code>npm <span class="nb">install </span>skynet-js
</code></pre></div>
<p>To upgrade to v4 (see right):</p>

<p>Note that just <code>npm install</code> will not work. This is by design: you must
explicitly opt-in to new major versions as they contain breaking changes.</p>
<h2 id='installing-a-dac'>Installing a DAC</h2>
<p>To use MySky to its fullest potential you may additionally want to install a
DAC. These are used through libraries which can be installed and imported from
like regular libraries.</p>
<div class="highlight"><pre class="highlight sh tab-shell"><code>npm <span class="nb">install</span> @skynetlabs/content-record-library
</code></pre></div>
<p>For example, to install SkynetLabs&#39;s official Content Record DAC (see right):</p>

<p>Usage instructions can be found <a href="https://github.com/SkynetLabs/content-record-library">here</a>.</p>
<h2 id='breaking-changes'>Breaking Changes</h2><h3 id='skydb-getjson-returns-a-data-link-instead-of-a-revision-number'>SkyDB getJSON returns a data link instead of a revision number</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">revision</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>=&gt;</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">dataLink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">getJSON</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">);</span>
</code></pre></div>
<p>Revision numbers have been removed from SkyDB and the return value of <code>getJSON</code>
changed according. See right.</p>
<h4 id='required-code-changes'>Required code changes</h4>
<p>Please do a search for <code>getJSON</code> in your code and double-check that you are not
using the returned <code>revision</code>, and remove it if you are. You no longer need to
pass <code>revision</code> into <code>setJSON</code> (see below).</p>
<h3 id='skydb-setjson-no-longer-accepts-an-optional-revision-number'>SkyDB setJSON no longer accepts an optional revision number</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">setJSON</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="nx">json</span><span class="p">,</span> <span class="nx">revision</span><span class="p">,</span> <span class="nx">customOptions</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>=&gt;</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">db</span><span class="p">.</span><span class="nx">setJSON</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="nx">json</span><span class="p">,</span> <span class="nx">customOptions</span><span class="p">);</span>
</code></pre></div>
<p><strong>Note:</strong> <code>setJSON</code> also has been changed to have the same return type as <code>getJSON</code>.</p>
<h4 id='required-code-changes-2'>Required code changes</h4>
<p>Please do a search for <code>setJSON</code> in your code and double-check that you are not
passing in <code>revision</code>, and remove it if you are. You no longer need to pass
<code>revision</code> into <code>setJSON</code>.</p>
<h3 id='getskylinkurl-downloadfile-openfile-and-the-hns-equivalents-are-all-now-async'>getSkylinkUrl, downloadFile, openFile, and the HNS equivalents are all now async</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">skylinkUrl</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getSkylinkUrl</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
<span class="nx">downloadFile</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
<span class="nx">openFile</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>=&gt;</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">skylinkUrl</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getSkylinkUrl</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">downloadFile</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
<span class="k">await</span> <span class="nx">openFile</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
<span class="c1">// ... same with HNS versions of these methods.</span>
</code></pre></div>
<p>The Skynet Client now silently fetches the portal API URL the first time it is
needed (you can trigger this manually with the new <code>client.initPortalUrl()</code>).
This means that all methods that take skylinks or operate on them internally
must be async.</p>
<h4 id='required-code-changes-3'>Required code changes</h4>
<p>Please do a search for affected functions in your code and make sure you prepend
<code>async</code> if you expect the functions to be blocking.</p>
<h3 id='portalurl-is-now-an-async-method-instead-of-a-variable'>portalUrl is now an async method instead of a variable</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">portalUrl</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">portalUrl</span><span class="p">;</span>
</code></pre></div>
<blockquote>
<p>=&gt;</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">portalUrl</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">portalUrl</span><span class="p">();</span>
</code></pre></div>
<p>In line with the above change, <code>client.portalUrl</code> is now an async method as it
will make a request for the portal API URL the first time it is called.</p>
<h4 id='required-code-changes-4'>Required code changes</h4>
<p>Please do a search for where you may be using <code>client.portalUrl</code> in your code
and make the necessary changes, as shown on the right.</p>
<h3 id='renamed-registryentry-datakey-to-datakey-for-consistency'>Renamed RegistryEntry datakey to dataKey for consistency</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">dataKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">abcd</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="p">{</span> <span class="na">datakey</span><span class="p">:</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">revision</span> <span class="p">};</span>
</code></pre></div>
<blockquote>
<p>=&gt;</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">dataKey</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">abcd</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">revision</span> <span class="p">};</span>
</code></pre></div>
<p>The <code>RegistryEntry</code> &quot;datakey&quot; field has been renamed to &quot;dataKey&quot; for
consistency with the rest of the codebase.</p>
<h4 id='required-code-changes-5'>Required code changes</h4>
<p>Please do a search for any instance of <code>datakey</code> (case-sensitive) in your code
and replace it with <code>dataKey</code>.</p>
<h3 id='the-getentry-timeout-option-has-been-removed-as-it-no-longer-has-an-effect'>The getEntry timeout option has been removed as it no longer has an effect</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">getEntry</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="p">{</span> <span class="na">timeout</span><span class="p">:</span> <span class="mi">10</span> <span class="p">});</span>
</code></pre></div>
<blockquote>
<p>=&gt;</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">getEntry</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">);</span>
</code></pre></div>
<p>The <code>timeout</code> optional option has been removed.</p>
<h4 id='required-code-changes-6'>Required code changes</h4>
<p>Please do a search for &quot;timeout&quot; in your code and remove it if using as an
option to <code>getEntry</code>. You will get a runtime error if you don&#39;t make the change.</p>
<h3 id='getfilecontent-and-getfilecontenthns-no-longer-return-metadata'>getFileContent and getFileContentHns no longer return metadata</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span><span class="p">,</span> <span class="nx">metadata</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getFileContent</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>=&gt;</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">skylink</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getFileContent</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">metadata</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">getMetadata</span><span class="p">(</span><span class="nx">skylink</span><span class="p">);</span>
</code></pre></div>
<p>The metadata was too large to be returned in headers. It now has its own method
and can only be obtained with <code>getMetadata</code>.</p>
<h4 id='required-code-changes-7'>Required code changes</h4>
<p>The metadata is no longer returned from these methods. Use the dedicated <code>getMetadata</code> method to get the metadata. See right.</p>
<h3 id='getmetadata-no-longer-returns-contenttype'>getMetadata no longer returns contentType</h3>
<p>The <code>getMetadata</code> method no longer returns a separate <code>contentType</code> field as it
is now a part of the metadata itself.</p>
<h3 id='registry-entries-now-take-data-that-is-type-uint8array-instead-of-string'>Registry entries now take data that is type Uint8Array instead of string</h3><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="nx">RegistryEntry</span> <span class="p">{</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="nx">data</span><span class="p">:</span> <span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">,</span> <span class="nx">revision</span> <span class="p">};</span>
<span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">setEntry</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span> <span class="nx">entry</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">entry</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">getEntry</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span> <span class="c1">// Previously, this was a string.</span>
</code></pre></div>
<blockquote>
<p>=&gt;</p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">stringToUint8ArrayUtf8</span><span class="p">,</span> <span class="nx">uint8ArrayToStringUtf8</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">skynet-js</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">entry</span> <span class="o">=</span> <span class="nx">RegistryEntry</span> <span class="p">{</span> <span class="nx">dataKey</span><span class="p">,</span> <span class="nx">data</span><span class="p">:</span> <span class="nx">stringToUint8ArrayUtf8</span><span class="p">(</span><span class="dl">"</span><span class="s2">hello</span><span class="dl">"</span><span class="p">),</span> <span class="nx">revision</span> <span class="p">};</span>
<span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">setEntry</span><span class="p">(</span><span class="nx">privateKey</span><span class="p">,</span> <span class="nx">entry</span><span class="p">);</span>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">entry</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">client</span><span class="p">.</span><span class="nx">registry</span><span class="p">.</span><span class="nx">getEntry</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">,</span> <span class="nx">dataKey</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">uint8ArrayToStringUtf8</span><span class="p">(</span><span class="nx">entry</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span> <span class="c1">// Now, this is a Uint8Array</span>
</code></pre></div>
<p>The type of <code>RegistryEntry.data</code> has changed. In order to maintain
compatibility, please make sure you convert any string data to <code>Uint8Array</code> before
calling <code>setEntry</code>, and that you convert <code>Uint8Array</code> back to a string on the
returned data after calling <code>getEntry</code>.</p>

<p>You should still be able to read entries set using older versions of the SDK,
including SkyDB entries, but older versions may no longer be able to read
entries set using the new version.</p>
<h4 id='required-code-changes-8'>Required code changes</h4>
<p>Please use the provided conversion functions <code>stringToUint8ArrayUtf8</code> and
<code>uint8ArrayToStringUtf8</code> if you wish to continue using strings instead of raw
bytes when working with entry data. See right.</p>
<h3 id='the-sia-skylink-prefix-has-been-changed-to-sia'>The sia: skylink prefix has been changed to sia://</h3>
<p>Please be aware of this change when working with any skylinks returned from the
API.</p>
<h3 id='skylinks-returned-from-skydb-all-start-with-sia'>Skylinks returned from SkyDB all start with sia://</h3>
<p>Previously, some skylinks returned from SkyDB did not contain either the <code>sia:</code>
or the <code>sia://</code> prefix. Please be aware that they now start with the new prefix
(see above).</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell--curl">curl</a>
                <a href="#" data-language-name="shell--cli">CLI</a>
                <a href="#" data-language-name="javascript--browser">Browser JS</a>
                <a href="#" data-language-name="javascript--node">NodeJS</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="go">Go</a>
          </div>
      </div>
    </div>
  </body>
</html>
